var to=Object.defineProperty;var eo=(e,n,r)=>n in e?to(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var U=(e,n,r)=>eo(e,typeof n!="symbol"?n+"":n,r);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var sn="http://www.w3.org/1999/xhtml";const qn={svg:"http://www.w3.org/2000/svg",xhtml:sn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Be(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),qn.hasOwnProperty(n)?{space:qn[n],local:e}:e}function no(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===sn&&n.documentElement.namespaceURI===sn?n.createElement(e):n.createElementNS(r,e)}}function ro(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vr(e){var n=Be(e);return(n.local?ro:no)(n)}function io(){}function Sn(e){return e==null?io:function(){return this.querySelector(e)}}function oo(e){typeof e!="function"&&(e=Sn(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,l=i[o]=new Array(s),u,f,h=0;h<s;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f);return new rt(i,this._parents)}function ao(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function so(){return[]}function Xr(e){return e==null?so:function(){return this.querySelectorAll(e)}}function lo(e){return function(){return ao(e.apply(this,arguments))}}function uo(e){typeof e=="function"?e=lo(e):e=Xr(e);for(var n=this._groups,r=n.length,i=[],o=[],a=0;a<r;++a)for(var s=n[a],l=s.length,u,f=0;f<l;++f)(u=s[f])&&(i.push(e.call(u,u.__data__,f,s)),o.push(u));return new rt(i,o)}function Yr(e){return function(){return this.matches(e)}}function Kr(e){return function(n){return n.matches(e)}}var fo=Array.prototype.find;function co(e){return function(){return fo.call(this.children,e)}}function ho(){return this.firstElementChild}function go(e){return this.select(e==null?ho:co(typeof e=="function"?e:Kr(e)))}var po=Array.prototype.filter;function yo(){return Array.from(this.children)}function _o(e){return function(){return po.call(this.children,e)}}function vo(e){return this.selectAll(e==null?yo:_o(typeof e=="function"?e:Kr(e)))}function mo(e){typeof e!="function"&&(e=Yr(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,l=i[o]=[],u,f=0;f<s;++f)(u=a[f])&&e.call(u,u.__data__,f,a)&&l.push(u);return new rt(i,this._parents)}function Zr(e){return new Array(e.length)}function xo(){return new rt(this._enter||this._groups.map(Zr),this._parents)}function Oe(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Oe.prototype={constructor:Oe,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bo(e){return function(){return e}}function wo(e,n,r,i,o,a){for(var s=0,l,u=n.length,f=a.length;s<f;++s)(l=n[s])?(l.__data__=a[s],i[s]=l):r[s]=new Oe(e,a[s]);for(;s<u;++s)(l=n[s])&&(o[s]=l)}function ko(e,n,r,i,o,a,s){var l,u,f=new Map,h=n.length,c=a.length,g=new Array(h),d;for(l=0;l<h;++l)(u=n[l])&&(g[l]=d=s.call(u,u.__data__,l,n)+"",f.has(d)?o[l]=u:f.set(d,u));for(l=0;l<c;++l)d=s.call(e,a[l],l,a)+"",(u=f.get(d))?(i[l]=u,u.__data__=a[l],f.delete(d)):r[l]=new Oe(e,a[l]);for(l=0;l<h;++l)(u=n[l])&&f.get(g[l])===u&&(o[l]=u)}function Co(e){return e.__data__}function Mo(e,n){if(!arguments.length)return Array.from(this,Co);var r=n?ko:wo,i=this._parents,o=this._groups;typeof e!="function"&&(e=bo(e));for(var a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),f=0;f<a;++f){var h=i[f],c=o[f],g=c.length,d=So(e.call(h,h&&h.__data__,f,i)),y=d.length,_=l[f]=new Array(y),v=s[f]=new Array(y),p=u[f]=new Array(g);r(h,c,_,v,p,d,n);for(var b=0,C=0,m,x;b<y;++b)if(m=_[b]){for(b>=C&&(C=b+1);!(x=v[C])&&++C<y;);m._next=x||null}}return s=new rt(s,i),s._enter=l,s._exit=u,s}function So(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ao(){return new rt(this._exit||this._groups.map(Zr),this._parents)}function Eo(e,n,r){var i=this.enter(),o=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),n!=null&&(o=n(o),o&&(o=o.selection())),r==null?a.remove():r(a),i&&o?i.merge(o).order():o}function To(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,o=r.length,a=i.length,s=Math.min(o,a),l=new Array(o),u=0;u<s;++u)for(var f=r[u],h=i[u],c=f.length,g=l[u]=new Array(c),d,y=0;y<c;++y)(d=f[y]||h[y])&&(g[y]=d);for(;u<o;++u)l[u]=r[u];return new rt(l,this._parents)}function No(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i=e[n],o=i.length-1,a=i[o],s;--o>=0;)(s=i[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Po(e){e||(e=Oo);function n(c,g){return c&&g?e(c.__data__,g.__data__):!c-!g}for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a){for(var s=r[a],l=s.length,u=o[a]=new Array(l),f,h=0;h<l;++h)(f=s[h])&&(u[h]=f);u.sort(n)}return new rt(o,this._parents).order()}function Oo(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function zo(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Io(){return Array.from(this)}function Ro(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null}function Do(){let e=0;for(const n of this)++e;return e}function $o(){return!this.node()}function Lo(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var o=n[r],a=0,s=o.length,l;a<s;++a)(l=o[a])&&e.call(l,l.__data__,a,o);return this}function Fo(e){return function(){this.removeAttribute(e)}}function jo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uo(e,n){return function(){this.setAttribute(e,n)}}function Ho(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function qo(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Bo(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Go(e,n){var r=Be(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((n==null?r.local?jo:Fo:typeof n=="function"?r.local?Bo:qo:r.local?Ho:Uo)(r,n))}function Qr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wo(e){return function(){this.style.removeProperty(e)}}function Vo(e,n,r){return function(){this.style.setProperty(e,n,r)}}function Xo(e,n,r){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function Yo(e,n,r){return arguments.length>1?this.each((n==null?Wo:typeof n=="function"?Xo:Vo)(e,n,r??"")):Bt(this.node(),e)}function Bt(e,n){return e.style.getPropertyValue(n)||Qr(e).getComputedStyle(e,null).getPropertyValue(n)}function Ko(e){return function(){delete this[e]}}function Zo(e,n){return function(){this[e]=n}}function Qo(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Jo(e,n){return arguments.length>1?this.each((n==null?Ko:typeof n=="function"?Qo:Zo)(e,n)):this.node()[e]}function Jr(e){return e.trim().split(/^|\s+/)}function An(e){return e.classList||new ti(e)}function ti(e){this._node=e,this._names=Jr(e.getAttribute("class")||"")}ti.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ei(e,n){for(var r=An(e),i=-1,o=n.length;++i<o;)r.add(n[i])}function ni(e,n){for(var r=An(e),i=-1,o=n.length;++i<o;)r.remove(n[i])}function ta(e){return function(){ei(this,e)}}function ea(e){return function(){ni(this,e)}}function na(e,n){return function(){(n.apply(this,arguments)?ei:ni)(this,e)}}function ra(e,n){var r=Jr(e+"");if(arguments.length<2){for(var i=An(this.node()),o=-1,a=r.length;++o<a;)if(!i.contains(r[o]))return!1;return!0}return this.each((typeof n=="function"?na:n?ta:ea)(r,n))}function ia(){this.textContent=""}function oa(e){return function(){this.textContent=e}}function aa(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function sa(e){return arguments.length?this.each(e==null?ia:(typeof e=="function"?aa:oa)(e)):this.node().textContent}function la(){this.innerHTML=""}function ua(e){return function(){this.innerHTML=e}}function fa(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function ca(e){return arguments.length?this.each(e==null?la:(typeof e=="function"?fa:ua)(e)):this.node().innerHTML}function ha(){this.nextSibling&&this.parentNode.appendChild(this)}function da(){return this.each(ha)}function ga(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pa(){return this.each(ga)}function ya(e){var n=typeof e=="function"?e:Vr(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function _a(){return null}function va(e,n){var r=typeof e=="function"?e:Vr(e),i=n==null?_a:typeof n=="function"?n:Sn(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function ma(){var e=this.parentNode;e&&e.removeChild(this)}function xa(){return this.each(ma)}function ba(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function wa(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function ka(e){return this.select(e?wa:ba)}function Ca(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ma(e){return function(n){e.call(this,n,this.__data__)}}function Sa(e){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");return i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),{type:n,name:r}})}function Aa(e){return function(){var n=this.__on;if(n){for(var r=0,i=-1,o=n.length,a;r<o;++r)a=n[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):n[++i]=a;++i?n.length=i:delete this.__on}}}function Ea(e,n,r){return function(){var i=this.__on,o,a=Ma(n);if(i){for(var s=0,l=i.length;s<l;++s)if((o=i[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=r),o.value=n;return}}this.addEventListener(e.type,a,r),o={type:e.type,name:e.name,value:n,listener:a,options:r},i?i.push(o):this.__on=[o]}}function Ta(e,n,r){var i=Sa(e+""),o,a=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,h;u<f;++u)for(o=0,h=l[u];o<a;++o)if((s=i[o]).type===h.type&&s.name===h.name)return h.value}return}for(l=n?Ea:Aa,o=0;o<a;++o)this.each(l(i[o],n,r));return this}function ri(e,n,r){var i=Qr(e),o=i.CustomEvent;typeof o=="function"?o=new o(n,r):(o=i.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function Na(e,n){return function(){return ri(this,e,n)}}function Pa(e,n){return function(){return ri(this,e,n.apply(this,arguments))}}function Oa(e,n){return this.each((typeof n=="function"?Pa:Na)(e,n))}function*za(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&(yield s)}var ii=[null];function rt(e,n){this._groups=e,this._parents=n}function pe(){return new rt([[document.documentElement]],ii)}function Ia(){return this}rt.prototype=pe.prototype={constructor:rt,select:oo,selectAll:uo,selectChild:go,selectChildren:vo,filter:mo,data:Mo,enter:xo,exit:Ao,join:Eo,merge:To,selection:Ia,order:No,sort:Po,call:zo,nodes:Io,node:Ro,size:Do,empty:$o,each:Lo,attr:Go,style:Yo,property:Jo,classed:ra,text:sa,html:ca,raise:da,lower:pa,append:ya,insert:va,remove:xa,clone:ka,datum:Ca,on:Ta,dispatch:Oa,[Symbol.iterator]:za};function at(e){return typeof e=="string"?new rt([[document.querySelector(e)]],[document.documentElement]):new rt([[e]],ii)}function Ra(e){let n;for(;n=e.sourceEvent;)e=n;return e}function pt(e,n){if(e=Ra(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}var Da={value:()=>{}};function ye(){for(var e=0,n=arguments.length,r={},i;e<n;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Ae(r)}function Ae(e){this._=e}function $a(e,n){return e.trim().split(/^|\s+/).map(function(r){var i="",o=r.indexOf(".");if(o>=0&&(i=r.slice(o+1),r=r.slice(0,o)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Ae.prototype=ye.prototype={constructor:Ae,on:function(e,n){var r=this._,i=$a(e+"",r),o,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((o=(e=i[a]).type)&&(o=La(r[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<s;)if(o=(e=i[a]).type)r[o]=Bn(r[o],e.name,n);else if(n==null)for(o in r)r[o]=Bn(r[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new Ae(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var r=new Array(o),i=0,o,a;i<o;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(n,r)}};function La(e,n){for(var r=0,i=e.length,o;r<i;++r)if((o=e[r]).name===n)return o.value}function Bn(e,n,r){for(var i=0,o=e.length;i<o;++i)if(e[i].name===n){e[i]=Da,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:n,value:r}),e}const Fa={passive:!1},le={capture:!0,passive:!1};function Ze(e){e.stopImmediatePropagation()}function Ht(e){e.preventDefault(),e.stopImmediatePropagation()}function oi(e){var n=e.document.documentElement,r=at(e).on("dragstart.drag",Ht,le);"onselectstart"in n?r.on("selectstart.drag",Ht,le):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ai(e,n){var r=e.document.documentElement,i=at(e).on("dragstart.drag",null);n&&(i.on("click.drag",Ht,le),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const me=e=>()=>e;function ln(e,{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:l,dx:u,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}ln.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ja(e){return!e.ctrlKey&&!e.button}function Ua(){return this.parentNode}function Ha(e,n){return n??{x:e.x,y:e.y}}function qa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ba(){var e=ja,n=Ua,r=Ha,i=qa,o={},a=ye("start","drag","end"),s=0,l,u,f,h,c=0;function g(m){m.on("mousedown.drag",d).filter(i).on("touchstart.drag",v).on("touchmove.drag",p,Fa).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(m,x){if(!(h||!e.call(this,m,x))){var k=C(this,n.call(this,m,x),m,x,"mouse");k&&(at(m.view).on("mousemove.drag",y,le).on("mouseup.drag",_,le),oi(m.view),Ze(m),f=!1,l=m.clientX,u=m.clientY,k("start",m))}}function y(m){if(Ht(m),!f){var x=m.clientX-l,k=m.clientY-u;f=x*x+k*k>c}o.mouse("drag",m)}function _(m){at(m.view).on("mousemove.drag mouseup.drag",null),ai(m.view,f),Ht(m),o.mouse("end",m)}function v(m,x){if(e.call(this,m,x)){var k=m.changedTouches,M=n.call(this,m,x),S=k.length,O,T;for(O=0;O<S;++O)(T=C(this,M,m,x,k[O].identifier,k[O]))&&(Ze(m),T("start",m,k[O]))}}function p(m){var x=m.changedTouches,k=x.length,M,S;for(M=0;M<k;++M)(S=o[x[M].identifier])&&(Ht(m),S("drag",m,x[M]))}function b(m){var x=m.changedTouches,k=x.length,M,S;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),M=0;M<k;++M)(S=o[x[M].identifier])&&(Ze(m),S("end",m,x[M]))}function C(m,x,k,M,S,O){var T=a.copy(),P=pt(O||k,x),z,$,w;if((w=r.call(m,new ln("beforestart",{sourceEvent:k,target:g,identifier:S,active:s,x:P[0],y:P[1],dx:0,dy:0,dispatch:T}),M))!=null)return z=w.x-P[0]||0,$=w.y-P[1]||0,function N(A,I,D){var L=P,F;switch(A){case"start":o[S]=N,F=s++;break;case"end":delete o[S],--s;case"drag":P=pt(D||I,x),F=s;break}T.call(A,m,new ln(A,{sourceEvent:I,subject:w,target:g,identifier:S,active:F,x:P[0]+z,y:P[1]+$,dx:P[0]-L[0],dy:P[1]-L[1],dispatch:T}),M)}}return g.filter=function(m){return arguments.length?(e=typeof m=="function"?m:me(!!m),g):e},g.container=function(m){return arguments.length?(n=typeof m=="function"?m:me(m),g):n},g.subject=function(m){return arguments.length?(r=typeof m=="function"?m:me(m),g):r},g.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:me(!!m),g):i},g.on=function(){var m=a.on.apply(a,arguments);return m===a?g:m},g.clickDistance=function(m){return arguments.length?(c=(m=+m)*m,g):Math.sqrt(c)},g}function En(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function si(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function _e(){}var ue=.7,ze=1/ue,qt="\\s*([+-]?\\d+)\\s*",fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ga=/^#([0-9a-f]{3,8})$/,Wa=new RegExp(`^rgb\\(${qt},${qt},${qt}\\)$`),Va=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),Xa=new RegExp(`^rgba\\(${qt},${qt},${qt},${fe}\\)$`),Ya=new RegExp(`^rgba\\(${_t},${_t},${_t},${fe}\\)$`),Ka=new RegExp(`^hsl\\(${fe},${_t},${_t}\\)$`),Za=new RegExp(`^hsla\\(${fe},${_t},${_t},${fe}\\)$`),Gn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};En(_e,ce,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wn,formatHex:Wn,formatHex8:Qa,formatHsl:Ja,formatRgb:Vn,toString:Vn});function Wn(){return this.rgb().formatHex()}function Qa(){return this.rgb().formatHex8()}function Ja(){return li(this).formatHsl()}function Vn(){return this.rgb().formatRgb()}function ce(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=Ga.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Xn(n):r===3?new tt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?xe(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?xe(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Wa.exec(e))?new tt(n[1],n[2],n[3],1):(n=Va.exec(e))?new tt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Xa.exec(e))?xe(n[1],n[2],n[3],n[4]):(n=Ya.exec(e))?xe(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Ka.exec(e))?Zn(n[1],n[2]/100,n[3]/100,1):(n=Za.exec(e))?Zn(n[1],n[2]/100,n[3]/100,n[4]):Gn.hasOwnProperty(e)?Xn(Gn[e]):e==="transparent"?new tt(NaN,NaN,NaN,0):null}function Xn(e){return new tt(e>>16&255,e>>8&255,e&255,1)}function xe(e,n,r,i){return i<=0&&(e=n=r=NaN),new tt(e,n,r,i)}function ts(e){return e instanceof _e||(e=ce(e)),e?(e=e.rgb(),new tt(e.r,e.g,e.b,e.opacity)):new tt}function un(e,n,r,i){return arguments.length===1?ts(e):new tt(e,n,r,i??1)}function tt(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}En(tt,un,si(_e,{brighter(e){return e=e==null?ze:Math.pow(ze,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ue:Math.pow(ue,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tt($t(this.r),$t(this.g),$t(this.b),Ie(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yn,formatHex:Yn,formatHex8:es,formatRgb:Kn,toString:Kn}));function Yn(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function es(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kn(){const e=Ie(this.opacity);return`${e===1?"rgb(":"rgba("}${$t(this.r)}, ${$t(this.g)}, ${$t(this.b)}${e===1?")":`, ${e})`}`}function Ie(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $t(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dt(e){return e=$t(e),(e<16?"0":"")+e.toString(16)}function Zn(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new ct(e,n,r,i)}function li(e){if(e instanceof ct)return new ct(e.h,e.s,e.l,e.opacity);if(e instanceof _e||(e=ce(e)),!e)return new ct;if(e instanceof ct)return e;e=e.rgb();var n=e.r/255,r=e.g/255,i=e.b/255,o=Math.min(n,r,i),a=Math.max(n,r,i),s=NaN,l=a-o,u=(a+o)/2;return l?(n===a?s=(r-i)/l+(r<i)*6:r===a?s=(i-n)/l+2:s=(n-r)/l+4,l/=u<.5?a+o:2-a-o,s*=60):l=u>0&&u<1?0:s,new ct(s,l,u,e.opacity)}function ns(e,n,r,i){return arguments.length===1?li(e):new ct(e,n,r,i??1)}function ct(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}En(ct,ns,si(_e,{brighter(e){return e=e==null?ze:Math.pow(ze,e),new ct(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ue:Math.pow(ue,e),new ct(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,o=2*r-i;return new tt(Qe(e>=240?e-240:e+120,o,i),Qe(e,o,i),Qe(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new ct(Qn(this.h),be(this.s),be(this.l),Ie(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ie(this.opacity);return`${e===1?"hsl(":"hsla("}${Qn(this.h)}, ${be(this.s)*100}%, ${be(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qn(e){return e=(e||0)%360,e<0?e+360:e}function be(e){return Math.max(0,Math.min(1,e||0))}function Qe(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const ui=e=>()=>e;function rs(e,n){return function(r){return e+r*n}}function is(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(i){return Math.pow(e+i*n,r)}}function os(e){return(e=+e)==1?fi:function(n,r){return r-n?is(n,r,e):ui(isNaN(n)?r:n)}}function fi(e,n){var r=n-e;return r?rs(e,r):ui(isNaN(e)?n:e)}const Jn=function e(n){var r=os(n);function i(o,a){var s=r((o=un(o)).r,(a=un(a)).r),l=r(o.g,a.g),u=r(o.b,a.b),f=fi(o.opacity,a.opacity);return function(h){return o.r=s(h),o.g=l(h),o.b=u(h),o.opacity=f(h),o+""}}return i.gamma=e,i}(1);function zt(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var fn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Je=new RegExp(fn.source,"g");function as(e){return function(){return e}}function ss(e){return function(n){return e(n)+""}}function ls(e,n){var r=fn.lastIndex=Je.lastIndex=0,i,o,a,s=-1,l=[],u=[];for(e=e+"",n=n+"";(i=fn.exec(e))&&(o=Je.exec(n));)(a=o.index)>r&&(a=n.slice(r,a),l[s]?l[s]+=a:l[++s]=a),(i=i[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,u.push({i:s,x:zt(i,o)})),r=Je.lastIndex;return r<n.length&&(a=n.slice(r),l[s]?l[s]+=a:l[++s]=a),l.length<2?u[0]?ss(u[0].x):as(n):(n=u.length,function(f){for(var h=0,c;h<n;++h)l[(c=u[h]).i]=c.x(f);return l.join("")})}var tr=180/Math.PI,cn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ci(e,n,r,i,o,a){var s,l,u;return(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s),(u=e*r+n*i)&&(r-=e*u,i-=n*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),e*i<n*r&&(e=-e,n=-n,u=-u,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(n,e)*tr,skewX:Math.atan(u)*tr,scaleX:s,scaleY:l}}var we;function us(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?cn:ci(n.a,n.b,n.c,n.d,n.e,n.f)}function fs(e){return e==null||(we||(we=document.createElementNS("http://www.w3.org/2000/svg","g")),we.setAttribute("transform",e),!(e=we.transform.baseVal.consolidate()))?cn:(e=e.matrix,ci(e.a,e.b,e.c,e.d,e.e,e.f))}function hi(e,n,r,i){function o(f){return f.length?f.pop()+" ":""}function a(f,h,c,g,d,y){if(f!==c||h!==g){var _=d.push("translate(",null,n,null,r);y.push({i:_-4,x:zt(f,c)},{i:_-2,x:zt(h,g)})}else(c||g)&&d.push("translate("+c+n+g+r)}function s(f,h,c,g){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),g.push({i:c.push(o(c)+"rotate(",null,i)-2,x:zt(f,h)})):h&&c.push(o(c)+"rotate("+h+i)}function l(f,h,c,g){f!==h?g.push({i:c.push(o(c)+"skewX(",null,i)-2,x:zt(f,h)}):h&&c.push(o(c)+"skewX("+h+i)}function u(f,h,c,g,d,y){if(f!==c||h!==g){var _=d.push(o(d)+"scale(",null,",",null,")");y.push({i:_-4,x:zt(f,c)},{i:_-2,x:zt(h,g)})}else(c!==1||g!==1)&&d.push(o(d)+"scale("+c+","+g+")")}return function(f,h){var c=[],g=[];return f=e(f),h=e(h),a(f.translateX,f.translateY,h.translateX,h.translateY,c,g),s(f.rotate,h.rotate,c,g),l(f.skewX,h.skewX,c,g),u(f.scaleX,f.scaleY,h.scaleX,h.scaleY,c,g),f=h=null,function(d){for(var y=-1,_=g.length,v;++y<_;)c[(v=g[y]).i]=v.x(d);return c.join("")}}}var cs=hi(us,"px, ","px)","deg)"),hs=hi(fs,", ",")",")"),ds=1e-12;function er(e){return((e=Math.exp(e))+1/e)/2}function gs(e){return((e=Math.exp(e))-1/e)/2}function ps(e){return((e=Math.exp(2*e))-1)/(e+1)}const ys=function e(n,r,i){function o(a,s){var l=a[0],u=a[1],f=a[2],h=s[0],c=s[1],g=s[2],d=h-l,y=c-u,_=d*d+y*y,v,p;if(_<ds)p=Math.log(g/f)/n,v=function(M){return[l+M*d,u+M*y,f*Math.exp(n*M*p)]};else{var b=Math.sqrt(_),C=(g*g-f*f+i*_)/(2*f*r*b),m=(g*g-f*f-i*_)/(2*g*r*b),x=Math.log(Math.sqrt(C*C+1)-C),k=Math.log(Math.sqrt(m*m+1)-m);p=(k-x)/n,v=function(M){var S=M*p,O=er(x),T=f/(r*b)*(O*ps(n*S+x)-gs(x));return[l+T*d,u+T*y,f*O/er(n*S+x)]}}return v.duration=p*1e3*n/Math.SQRT2,v}return o.rho=function(a){var s=Math.max(.001,+a),l=s*s,u=l*l;return e(s,l,u)},o}(Math.SQRT2,2,4);var Gt=0,ee=0,Vt=0,di=1e3,Re,ne,De=0,Ft=0,Ge=0,he=typeof performance=="object"&&performance.now?performance:Date,gi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Tn(){return Ft||(gi(_s),Ft=he.now()+Ge)}function _s(){Ft=0}function $e(){this._call=this._time=this._next=null}$e.prototype=Nn.prototype={constructor:$e,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Tn():+r)+(n==null?0:+n),!this._next&&ne!==this&&(ne?ne._next=this:Re=this,ne=this),this._call=e,this._time=r,hn()},stop:function(){this._call&&(this._call=null,this._time=1/0,hn())}};function Nn(e,n,r){var i=new $e;return i.restart(e,n,r),i}function vs(){Tn(),++Gt;for(var e=Re,n;e;)(n=Ft-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Gt}function nr(){Ft=(De=he.now())+Ge,Gt=ee=0;try{vs()}finally{Gt=0,xs(),Ft=0}}function ms(){var e=he.now(),n=e-De;n>di&&(Ge-=n,De=e)}function xs(){for(var e,n=Re,r,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Re=r);ne=e,hn(i)}function hn(e){if(!Gt){ee&&(ee=clearTimeout(ee));var n=e-Ft;n>24?(e<1/0&&(ee=setTimeout(nr,e-he.now()-Ge)),Vt&&(Vt=clearInterval(Vt))):(Vt||(De=he.now(),Vt=setInterval(ms,di)),Gt=1,gi(nr))}}function rr(e,n,r){var i=new $e;return n=n==null?0:+n,i.restart(o=>{i.stop(),e(o+n)},n,r),i}var bs=ye("start","end","cancel","interrupt"),ws=[],pi=0,ir=1,dn=2,Ee=3,or=4,gn=5,Te=6;function We(e,n,r,i,o,a){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;ks(e,r,{name:n,index:i,group:o,on:bs,tween:ws,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:pi})}function Pn(e,n){var r=dt(e,n);if(r.state>pi)throw new Error("too late; already scheduled");return r}function mt(e,n){var r=dt(e,n);if(r.state>Ee)throw new Error("too late; already running");return r}function dt(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function ks(e,n,r){var i=e.__transition,o;i[n]=r,r.timer=Nn(a,0,r.time);function a(f){r.state=ir,r.timer.restart(s,r.delay,r.time),r.delay<=f&&s(f-r.delay)}function s(f){var h,c,g,d;if(r.state!==ir)return u();for(h in i)if(d=i[h],d.name===r.name){if(d.state===Ee)return rr(s);d.state===or?(d.state=Te,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[h]):+h<n&&(d.state=Te,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[h])}if(rr(function(){r.state===Ee&&(r.state=or,r.timer.restart(l,r.delay,r.time),l(f))}),r.state=dn,r.on.call("start",e,e.__data__,r.index,r.group),r.state===dn){for(r.state=Ee,o=new Array(g=r.tween.length),h=0,c=-1;h<g;++h)(d=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(o[++c]=d);o.length=c+1}}function l(f){for(var h=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(u),r.state=gn,1),c=-1,g=o.length;++c<g;)o[c].call(e,h);r.state===gn&&(r.on.call("end",e,e.__data__,r.index,r.group),u())}function u(){r.state=Te,r.timer.stop(),delete i[n];for(var f in i)return;delete e.__transition}}function Ne(e,n){var r=e.__transition,i,o,a=!0,s;if(r){n=n==null?null:n+"";for(s in r){if((i=r[s]).name!==n){a=!1;continue}o=i.state>dn&&i.state<gn,i.state=Te,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[s]}a&&delete e.__transition}}function Cs(e){return this.each(function(){Ne(this,e)})}function Ms(e,n){var r,i;return function(){var o=mt(this,e),a=o.tween;if(a!==r){i=r=a;for(var s=0,l=i.length;s<l;++s)if(i[s].name===n){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function Ss(e,n,r){var i,o;if(typeof r!="function")throw new Error;return function(){var a=mt(this,e),s=a.tween;if(s!==i){o=(i=s).slice();for(var l={name:n,value:r},u=0,f=o.length;u<f;++u)if(o[u].name===n){o[u]=l;break}u===f&&o.push(l)}a.tween=o}}function As(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i=dt(this.node(),r).tween,o=0,a=i.length,s;o<a;++o)if((s=i[o]).name===e)return s.value;return null}return this.each((n==null?Ms:Ss)(r,e,n))}function On(e,n,r){var i=e._id;return e.each(function(){var o=mt(this,i);(o.value||(o.value={}))[n]=r.apply(this,arguments)}),function(o){return dt(o,i).value[n]}}function yi(e,n){var r;return(typeof n=="number"?zt:n instanceof ce?Jn:(r=ce(n))?(n=r,Jn):ls)(e,n)}function Es(e){return function(){this.removeAttribute(e)}}function Ts(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ns(e,n,r){var i,o=r+"",a;return function(){var s=this.getAttribute(e);return s===o?null:s===i?a:a=n(i=s,r)}}function Ps(e,n,r){var i,o=r+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?a:a=n(i=s,r)}}function Os(e,n,r){var i,o,a;return function(){var s,l=r(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===i&&u===o?a:(o=u,a=n(i=s,l)))}}function zs(e,n,r){var i,o,a;return function(){var s,l=r(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===i&&u===o?a:(o=u,a=n(i=s,l)))}}function Is(e,n){var r=Be(e),i=r==="transform"?hs:yi;return this.attrTween(e,typeof n=="function"?(r.local?zs:Os)(r,i,On(this,"attr."+e,n)):n==null?(r.local?Ts:Es)(r):(r.local?Ps:Ns)(r,i,n))}function Rs(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function Ds(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function $s(e,n){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Ds(e,a)),r}return o._value=n,o}function Ls(e,n){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Rs(e,a)),r}return o._value=n,o}function Fs(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var i=Be(e);return this.tween(r,(i.local?$s:Ls)(i,n))}function js(e,n){return function(){Pn(this,e).delay=+n.apply(this,arguments)}}function Us(e,n){return n=+n,function(){Pn(this,e).delay=n}}function Hs(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?js:Us)(n,e)):dt(this.node(),n).delay}function qs(e,n){return function(){mt(this,e).duration=+n.apply(this,arguments)}}function Bs(e,n){return n=+n,function(){mt(this,e).duration=n}}function Gs(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?qs:Bs)(n,e)):dt(this.node(),n).duration}function Ws(e,n){if(typeof n!="function")throw new Error;return function(){mt(this,e).ease=n}}function Vs(e){var n=this._id;return arguments.length?this.each(Ws(n,e)):dt(this.node(),n).ease}function Xs(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;mt(this,e).ease=r}}function Ys(e){if(typeof e!="function")throw new Error;return this.each(Xs(this._id,e))}function Ks(e){typeof e!="function"&&(e=Yr(e));for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o)for(var a=n[o],s=a.length,l=i[o]=[],u,f=0;f<s;++f)(u=a[f])&&e.call(u,u.__data__,f,a)&&l.push(u);return new Nt(i,this._parents,this._name,this._id)}function Zs(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u=n[l],f=r[l],h=u.length,c=s[l]=new Array(h),g,d=0;d<h;++d)(g=u[d]||f[d])&&(c[d]=g);for(;l<i;++l)s[l]=n[l];return new Nt(s,this._parents,this._name,this._id)}function Qs(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function Js(e,n,r){var i,o,a=Qs(n)?Pn:mt;return function(){var s=a(this,e),l=s.on;l!==i&&(o=(i=l).copy()).on(n,r),s.on=o}}function tl(e,n){var r=this._id;return arguments.length<2?dt(this.node(),r).on.on(e):this.each(Js(r,e,n))}function el(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function nl(){return this.on("end.remove",el(this._id))}function rl(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Sn(e));for(var i=this._groups,o=i.length,a=new Array(o),s=0;s<o;++s)for(var l=i[s],u=l.length,f=a[s]=new Array(u),h,c,g=0;g<u;++g)(h=l[g])&&(c=e.call(h,h.__data__,g,l))&&("__data__"in h&&(c.__data__=h.__data__),f[g]=c,We(f[g],n,r,g,f,dt(h,r)));return new Nt(a,this._parents,n,r)}function il(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Xr(e));for(var i=this._groups,o=i.length,a=[],s=[],l=0;l<o;++l)for(var u=i[l],f=u.length,h,c=0;c<f;++c)if(h=u[c]){for(var g=e.call(h,h.__data__,c,u),d,y=dt(h,r),_=0,v=g.length;_<v;++_)(d=g[_])&&We(d,n,r,_,g,y);a.push(g),s.push(h)}return new Nt(a,s,n,r)}var ol=pe.prototype.constructor;function al(){return new ol(this._groups,this._parents)}function sl(e,n){var r,i,o;return function(){var a=Bt(this,e),s=(this.style.removeProperty(e),Bt(this,e));return a===s?null:a===r&&s===i?o:o=n(r=a,i=s)}}function _i(e){return function(){this.style.removeProperty(e)}}function ll(e,n,r){var i,o=r+"",a;return function(){var s=Bt(this,e);return s===o?null:s===i?a:a=n(i=s,r)}}function ul(e,n,r){var i,o,a;return function(){var s=Bt(this,e),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Bt(this,e))),s===u?null:s===i&&u===o?a:(o=u,a=n(i=s,l))}}function fl(e,n){var r,i,o,a="style."+n,s="end."+a,l;return function(){var u=mt(this,e),f=u.on,h=u.value[a]==null?l||(l=_i(n)):void 0;(f!==r||o!==h)&&(i=(r=f).copy()).on(s,o=h),u.on=i}}function cl(e,n,r){var i=(e+="")=="transform"?cs:yi;return n==null?this.styleTween(e,sl(e,i)).on("end.style."+e,_i(e)):typeof n=="function"?this.styleTween(e,ul(e,i,On(this,"style."+e,n))).each(fl(this._id,e)):this.styleTween(e,ll(e,i,n),r).on("end.style."+e,null)}function hl(e,n,r){return function(i){this.style.setProperty(e,n.call(this,i),r)}}function dl(e,n,r){var i,o;function a(){var s=n.apply(this,arguments);return s!==o&&(i=(o=s)&&hl(e,s,r)),i}return a._value=n,a}function gl(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,dl(e,n,r??""))}function pl(e){return function(){this.textContent=e}}function yl(e){return function(){var n=e(this);this.textContent=n??""}}function _l(e){return this.tween("text",typeof e=="function"?yl(On(this,"text",e)):pl(e==null?"":e+""))}function vl(e){return function(n){this.textContent=e.call(this,n)}}function ml(e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&vl(o)),n}return i._value=e,i}function xl(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,ml(e))}function bl(){for(var e=this._name,n=this._id,r=vi(),i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],l=s.length,u,f=0;f<l;++f)if(u=s[f]){var h=dt(u,n);We(u,e,r,f,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Nt(i,this._parents,e,r)}function wl(){var e,n,r=this,i=r._id,o=r.size();return new Promise(function(a,s){var l={value:s},u={value:function(){--o===0&&a()}};r.each(function(){var f=mt(this,i),h=f.on;h!==e&&(n=(e=h).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(u)),f.on=n}),o===0&&a()})}var kl=0;function Nt(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}function vi(){return++kl}var wt=pe.prototype;Nt.prototype={constructor:Nt,select:rl,selectAll:il,selectChild:wt.selectChild,selectChildren:wt.selectChildren,filter:Ks,merge:Zs,selection:al,transition:bl,call:wt.call,nodes:wt.nodes,node:wt.node,size:wt.size,empty:wt.empty,each:wt.each,on:tl,attr:Is,attrTween:Fs,style:cl,styleTween:gl,text:_l,textTween:xl,remove:nl,tween:As,delay:Hs,duration:Gs,ease:Vs,easeVarying:Ys,end:wl,[Symbol.iterator]:wt[Symbol.iterator]};function Cl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ml={time:null,delay:0,duration:250,ease:Cl};function Sl(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function Al(e){var n,r;e instanceof Nt?(n=e._id,e=e._name):(n=vi(),(r=Ml).time=Tn(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],l=s.length,u,f=0;f<l;++f)(u=s[f])&&We(u,e,n,f,s,r||Sl(u,n));return new Nt(i,this._parents,e,n)}pe.prototype.interrupt=Cs;pe.prototype.transition=Al;const ke=e=>()=>e;function El(e,{sourceEvent:n,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function At(e,n,r){this.k=e,this.x=n,this.y=r}At.prototype={constructor:At,scale:function(e){return e===1?this:new At(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new At(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zn=new At(1,0,0);gt.prototype=At.prototype;function gt(e){for(;!e.__zoom;)if(!(e=e.parentNode))return zn;return e.__zoom}function tn(e){e.stopImmediatePropagation()}function Xt(e){e.preventDefault(),e.stopImmediatePropagation()}function Tl(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Nl(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ar(){return this.__zoom||zn}function Pl(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ol(){return navigator.maxTouchPoints||"ontouchstart"in this}function zl(e,n,r){var i=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],a=e.invertY(n[0][1])-r[0][1],s=e.invertY(n[1][1])-r[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function Il(){var e=Tl,n=Nl,r=zl,i=Pl,o=Ol,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=ys,f=ye("start","zoom","end"),h,c,g,d=500,y=150,_=0,v=10;function p(w){w.property("__zoom",ar).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",T).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(w,N,A,I){var D=w.selection?w.selection():w;D.property("__zoom",ar),w!==D?x(w,N,A,I):D.interrupt().each(function(){k(this,arguments).event(I).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},p.scaleBy=function(w,N,A,I){p.scaleTo(w,function(){var D=this.__zoom.k,L=typeof N=="function"?N.apply(this,arguments):N;return D*L},A,I)},p.scaleTo=function(w,N,A,I){p.transform(w,function(){var D=n.apply(this,arguments),L=this.__zoom,F=A==null?m(D):typeof A=="function"?A.apply(this,arguments):A,j=L.invert(F),H=typeof N=="function"?N.apply(this,arguments):N;return r(C(b(L,H),F,j),D,s)},A,I)},p.translateBy=function(w,N,A,I){p.transform(w,function(){return r(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof A=="function"?A.apply(this,arguments):A),n.apply(this,arguments),s)},null,I)},p.translateTo=function(w,N,A,I,D){p.transform(w,function(){var L=n.apply(this,arguments),F=this.__zoom,j=I==null?m(L):typeof I=="function"?I.apply(this,arguments):I;return r(zn.translate(j[0],j[1]).scale(F.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof A=="function"?-A.apply(this,arguments):-A),L,s)},I,D)};function b(w,N){return N=Math.max(a[0],Math.min(a[1],N)),N===w.k?w:new At(N,w.x,w.y)}function C(w,N,A){var I=N[0]-A[0]*w.k,D=N[1]-A[1]*w.k;return I===w.x&&D===w.y?w:new At(w.k,I,D)}function m(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function x(w,N,A,I){w.on("start.zoom",function(){k(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(I).end()}).tween("zoom",function(){var D=this,L=arguments,F=k(D,L).event(I),j=n.apply(D,L),H=A==null?m(j):typeof A=="function"?A.apply(D,L):A,Y=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),X=D.__zoom,lt=typeof N=="function"?N.apply(D,L):N,xt=u(X.invert(H).concat(Y/X.k),lt.invert(H).concat(Y/lt.k));return function(ut){if(ut===1)ut=lt;else{var bt=xt(ut),Ke=Y/bt[2];ut=new At(Ke,H[0]-bt[0]*Ke,H[1]-bt[1]*Ke)}F.zoom(null,ut)}})}function k(w,N,A){return!A&&w.__zooming||new M(w,N)}function M(w,N){this.that=w,this.args=N,this.active=0,this.sourceEvent=null,this.extent=n.apply(w,N),this.taps=0}M.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,N){return this.mouse&&w!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var N=at(this.that).datum();f.call(w,this.that,new El(w,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:f}),N)}};function S(w,...N){if(!e.apply(this,arguments))return;var A=k(this,N).event(w),I=this.__zoom,D=Math.max(a[0],Math.min(a[1],I.k*Math.pow(2,i.apply(this,arguments)))),L=pt(w);if(A.wheel)(A.mouse[0][0]!==L[0]||A.mouse[0][1]!==L[1])&&(A.mouse[1]=I.invert(A.mouse[0]=L)),clearTimeout(A.wheel);else{if(I.k===D)return;A.mouse=[L,I.invert(L)],Ne(this),A.start()}Xt(w),A.wheel=setTimeout(F,y),A.zoom("mouse",r(C(b(I,D),A.mouse[0],A.mouse[1]),A.extent,s));function F(){A.wheel=null,A.end()}}function O(w,...N){if(g||!e.apply(this,arguments))return;var A=w.currentTarget,I=k(this,N,!0).event(w),D=at(w.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",Y,!0),L=pt(w,A),F=w.clientX,j=w.clientY;oi(w.view),tn(w),I.mouse=[L,this.__zoom.invert(L)],Ne(this),I.start();function H(X){if(Xt(X),!I.moved){var lt=X.clientX-F,xt=X.clientY-j;I.moved=lt*lt+xt*xt>_}I.event(X).zoom("mouse",r(C(I.that.__zoom,I.mouse[0]=pt(X,A),I.mouse[1]),I.extent,s))}function Y(X){D.on("mousemove.zoom mouseup.zoom",null),ai(X.view,I.moved),Xt(X),I.event(X).end()}}function T(w,...N){if(e.apply(this,arguments)){var A=this.__zoom,I=pt(w.changedTouches?w.changedTouches[0]:w,this),D=A.invert(I),L=A.k*(w.shiftKey?.5:2),F=r(C(b(A,L),I,D),n.apply(this,N),s);Xt(w),l>0?at(this).transition().duration(l).call(x,F,I,w):at(this).call(p.transform,F,I,w)}}function P(w,...N){if(e.apply(this,arguments)){var A=w.touches,I=A.length,D=k(this,N,w.changedTouches.length===I).event(w),L,F,j,H;for(tn(w),F=0;F<I;++F)j=A[F],H=pt(j,this),H=[H,this.__zoom.invert(H),j.identifier],D.touch0?!D.touch1&&D.touch0[2]!==H[2]&&(D.touch1=H,D.taps=0):(D.touch0=H,L=!0,D.taps=1+!!h);h&&(h=clearTimeout(h)),L&&(D.taps<2&&(c=H[0],h=setTimeout(function(){h=null},d)),Ne(this),D.start())}}function z(w,...N){if(this.__zooming){var A=k(this,N).event(w),I=w.changedTouches,D=I.length,L,F,j,H;for(Xt(w),L=0;L<D;++L)F=I[L],j=pt(F,this),A.touch0&&A.touch0[2]===F.identifier?A.touch0[0]=j:A.touch1&&A.touch1[2]===F.identifier&&(A.touch1[0]=j);if(F=A.that.__zoom,A.touch1){var Y=A.touch0[0],X=A.touch0[1],lt=A.touch1[0],xt=A.touch1[1],ut=(ut=lt[0]-Y[0])*ut+(ut=lt[1]-Y[1])*ut,bt=(bt=xt[0]-X[0])*bt+(bt=xt[1]-X[1])*bt;F=b(F,Math.sqrt(ut/bt)),j=[(Y[0]+lt[0])/2,(Y[1]+lt[1])/2],H=[(X[0]+xt[0])/2,(X[1]+xt[1])/2]}else if(A.touch0)j=A.touch0[0],H=A.touch0[1];else return;A.zoom("touch",r(C(F,j,H),A.extent,s))}}function $(w,...N){if(this.__zooming){var A=k(this,N).event(w),I=w.changedTouches,D=I.length,L,F;for(tn(w),g&&clearTimeout(g),g=setTimeout(function(){g=null},d),L=0;L<D;++L)F=I[L],A.touch0&&A.touch0[2]===F.identifier?delete A.touch0:A.touch1&&A.touch1[2]===F.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(F=pt(F,this),Math.hypot(c[0]-F[0],c[1]-F[1])<v)){var j=at(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return p.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:ke(+w),p):i},p.filter=function(w){return arguments.length?(e=typeof w=="function"?w:ke(!!w),p):e},p.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:ke(!!w),p):o},p.extent=function(w){return arguments.length?(n=typeof w=="function"?w:ke([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),p):n},p.scaleExtent=function(w){return arguments.length?(a[0]=+w[0],a[1]=+w[1],p):[a[0],a[1]]},p.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(w){return arguments.length?(r=w,p):r},p.duration=function(w){return arguments.length?(l=+w,p):l},p.interpolate=function(w){return arguments.length?(u=w,p):u},p.on=function(){var w=f.on.apply(f,arguments);return w===f?p:w},p.clickDistance=function(w){return arguments.length?(_=(w=+w)*w,p):Math.sqrt(_)},p.tapDistance=function(w){return arguments.length?(v=+w,p):v},p}class sr extends Map{constructor(n,r=$l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[i,o]of n)this.set(i,o)}get(n){return super.get(lr(this,n))}has(n){return super.has(lr(this,n))}set(n,r){return super.set(Rl(this,n),r)}delete(n){return super.delete(Dl(this,n))}}function lr({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):r}function Rl({_intern:e,_key:n},r){const i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function Dl({_intern:e,_key:n},r){const i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function $l(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ur(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of e)(o=n(o,++i,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function fr(e,n){let r;if(n===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of e)(o=n(o,++i,e))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}function Ll(e,n){let r=0;for(let i of e)(i=+i)&&(r+=i);return r}var Fl=typeof global=="object"&&global&&global.Object===Object&&global,jl=typeof self=="object"&&self&&self.Object===Object&&self,mi=Fl||jl||Function("return this")(),Le=mi.Symbol,xi=Object.prototype,Ul=xi.hasOwnProperty,Hl=xi.toString,Yt=Le?Le.toStringTag:void 0;function ql(e){var n=Ul.call(e,Yt),r=e[Yt];try{e[Yt]=void 0;var i=!0}catch{}var o=Hl.call(e);return i&&(n?e[Yt]=r:delete e[Yt]),o}var Bl=Object.prototype,Gl=Bl.toString;function Wl(e){return Gl.call(e)}var Vl="[object Null]",Xl="[object Undefined]",cr=Le?Le.toStringTag:void 0;function Yl(e){return e==null?e===void 0?Xl:Vl:cr&&cr in Object(e)?ql(e):Wl(e)}function Kl(e){return e!=null&&typeof e=="object"}var Zl="[object Symbol]";function Ql(e){return typeof e=="symbol"||Kl(e)&&Yl(e)==Zl}var Jl=/\s/;function tu(e){for(var n=e.length;n--&&Jl.test(e.charAt(n)););return n}var eu=/^\s+/;function nu(e){return e&&e.slice(0,tu(e)+1).replace(eu,"")}function Fe(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var hr=NaN,ru=/^[-+]0x[0-9a-f]+$/i,iu=/^0b[01]+$/i,ou=/^0o[0-7]+$/i,au=parseInt;function dr(e){if(typeof e=="number")return e;if(Ql(e))return hr;if(Fe(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Fe(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=nu(e);var r=iu.test(e);return r||ou.test(e)?au(e.slice(2),r?2:8):ru.test(e)?hr:+e}var en=function(){return mi.Date.now()},su="Expected a function",lu=Math.max,uu=Math.min;function bi(e,n,r){var i,o,a,s,l,u,f=0,h=!1,c=!1,g=!0;if(typeof e!="function")throw new TypeError(su);n=dr(n)||0,Fe(r)&&(h=!!r.leading,c="maxWait"in r,a=c?lu(dr(r.maxWait)||0,n):a,g="trailing"in r?!!r.trailing:g);function d(k){var M=i,S=o;return i=o=void 0,f=k,s=e.apply(S,M),s}function y(k){return f=k,l=setTimeout(p,n),h?d(k):s}function _(k){var M=k-u,S=k-f,O=n-M;return c?uu(O,a-S):O}function v(k){var M=k-u,S=k-f;return u===void 0||M>=n||M<0||c&&S>=a}function p(){var k=en();if(v(k))return b(k);l=setTimeout(p,_(k))}function b(k){return l=void 0,g&&i?d(k):(i=o=void 0,s)}function C(){l!==void 0&&clearTimeout(l),f=0,i=u=o=l=void 0}function m(){return l===void 0?s:b(en())}function x(){var k=en(),M=v(k);if(i=arguments,o=this,u=k,M){if(l===void 0)return y(u);if(c)return clearTimeout(l),l=setTimeout(p,n),d(u)}return l===void 0&&(l=setTimeout(p,n)),s}return x.cancel=C,x.flush=m,x}var fu="Expected a function";function cu(e,n,r){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(fu);return Fe(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),bi(e,n,{leading:i,maxWait:n,trailing:o})}var Lt=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var n=1.70158;return e===1?1:e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return e===0?0:--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}}),Bounce:Object.freeze({In:function(e){return 1-Lt.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?Lt.Bounce.In(e*2)*.5:Lt.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(n*2,e)/2:(1-Math.pow(2-n*2,e))/2+.5}}}}),re=function(){return performance.now()},wi=function(){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,n)}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(r){return n._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];(n=s._group)===null||n===void 0||n.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},e.prototype.remove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];a._group=void 0,delete this._tweens[a.getId()],delete this._tweensAddedDuringUpdate[a.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(n){return!n.isPlaying()})},e.prototype.update=function(n,r){n===void 0&&(n=re()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var a=this._tweens[i[o]],s=!r;a&&a.update(n,s)===!1&&!r&&this.remove(a)}i=Object.keys(this._tweensAddedDuringUpdate)}},e}(),pn={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),a=pn.Utils.Linear;return n<0?a(e[0],e[1],i):n>1?a(e[r],e[r-1],r-i):a(e[o],e[o+1>r?r:o+1],i-o)},Utils:{Linear:function(e,n,r){return(n-e)*r+e}}},ki=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),yn=new wi,gr=function(){function e(n,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Lt.Linear.None,this._interpolationFunction=pn.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=ki.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=n,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=yn,yn.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(n,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=n,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(n){return n===void 0&&(n=1e3),this._duration=n<0?0:n,this},e.prototype.dynamic=function(n){return n===void 0&&(n=!1),this._isDynamic=n,this},e.prototype.start=function(n,r){if(n===void 0&&(n=re()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var a in this._valuesEnd)o[a]=this._valuesEnd[a];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(n){return this.start(n,!0)},e.prototype._setupProperties=function(n,r,i,o,a){for(var s in i){var l=n[s],u=Array.isArray(l),f=u?"array":typeof l,h=!u&&Array.isArray(i[s]);if(!(f==="undefined"||f==="function")){if(h){var c=i[s];if(c.length===0)continue;for(var g=[l],d=0,y=c.length;d<y;d+=1){var _=this._handleRelativeValue(l,c[d]);if(isNaN(_)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}g.push(_)}h&&(i[s]=g)}if((f==="object"||u)&&l&&!h){r[s]=u?[]:{};var v=l;for(var p in v)r[s][p]=v[p];o[s]=u?[]:{};var c=i[s];if(!this._isDynamic){var b={};for(var p in c)b[p]=c[p];i[s]=c=b}this._setupProperties(v,r[s],c,o[s],a)}else(typeof r[s]>"u"||a)&&(r[s]=l),u||(r[s]*=1),h?o[s]=i[s].slice().reverse():o[s]=r[s]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(n){return n===void 0&&(n=re()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this)},e.prototype.resume=function(n){return n===void 0&&(n=re()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return n?(n.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var n;return(n=this._group)===null||n===void 0||n.remove(this),this},e.prototype.delay=function(n){return n===void 0&&(n=0),this._delayTime=n,this},e.prototype.repeat=function(n){return n===void 0&&(n=0),this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return n===void 0&&(n=!1),this._yoyo=n,this},e.prototype.easing=function(n){return n===void 0&&(n=Lt.Linear.None),this._easingFunction=n,this},e.prototype.interpolation=function(n){return n===void 0&&(n=pn.Linear),this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onEveryStart=function(n){return this._onEveryStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,r){var i=this,o;if(n===void 0&&(n=re()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var a;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(n,!0);else return!1;if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=n-this._startTime,l=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),u=this._duration+this._repeat*l,f=function(){if(i._duration===0||s>u)return 1;var _=Math.trunc(s/l),v=s-_*l,p=Math.min(v/i._duration,1);return p===0&&s===i._duration?1:p},h=f(),c=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||s>=this._duration)if(this._repeat>0){var g=Math.min(Math.trunc((s-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=g);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*g,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,y=this._chainedTweens.length;d<y;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,r,i,o){for(var a in i)if(r[a]!==void 0){var s=r[a]||0,l=i[a],u=Array.isArray(n[a]),f=Array.isArray(l),h=!u&&f;h?n[a]=this._interpolationFunction(l,o):typeof l=="object"&&l?this._updateProperties(n[a],s,l,o):(l=this._handleRelativeValue(s,l),typeof l=="number"&&(n[a]=s+(l-s)*o))}},e.prototype._handleRelativeValue=function(n,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?n+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(n){var r=this._valuesStartRepeat[n],i=this._valuesEnd[n];typeof i=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(i):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=r},e.autoStartOnUpdate=!1,e}();ki.nextId;var vt=yn;vt.getAll.bind(vt);vt.removeAll.bind(vt);vt.add.bind(vt);vt.remove.bind(vt);vt.update.bind(vt);function pr(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function hu(e){if(Array.isArray(e))return e}function du(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function gu(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function pu(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,l=[],u=!0,f=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw o}}return l}}function yu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _u(e,n){return hu(e)||pu(e,n)||vu(e,n)||yu()}function vu(e,n){if(e){if(typeof e=="string")return pr(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pr(e,n):void 0}}var mu=gu(function e(n,r){var i=r.default,o=i===void 0?null:i,a=r.triggerUpdate,s=a===void 0?!0:a,l=r.onChange,u=l===void 0?function(f,h){}:l;du(this,e),this.name=n,this.defaultVal=o,this.triggerUpdate=s,this.onChange=u});function In(e){var n=e.stateInit,r=n===void 0?function(){return{}}:n,i=e.props,o=i===void 0?{}:i,a=e.methods,s=a===void 0?{}:a,l=e.aliases,u=l===void 0?{}:l,f=e.init,h=f===void 0?function(){}:f,c=e.update,g=c===void 0?function(){}:c,d=Object.keys(o).map(function(y){return new mu(y,o[y])});return function y(){for(var _=arguments.length,v=new Array(_),p=0;p<_;p++)v[p]=arguments[p];var b=!!(this instanceof y&&this.constructor),C=b?v.shift():void 0,m=v[0],x=m===void 0?{}:m,k=Object.assign({},r instanceof Function?r(x):r,{initialised:!1}),M={};function S(P){return O(P,x),T(),S}var O=function(z,$){h.call(S,z,k,$),k.initialised=!0},T=bi(function(){k.initialised&&(g.call(S,k,M),M={})},1);return d.forEach(function(P){S[P.name]=z(P);function z($){var w=$.name,N=$.triggerUpdate,A=N===void 0?!1:N,I=$.onChange,D=I===void 0?function(j,H){}:I,L=$.defaultVal,F=L===void 0?null:L;return function(j){var H=k[w];if(!arguments.length)return H;var Y=j===void 0?F:j;return k[w]=Y,D.call(S,Y,k,H),!M.hasOwnProperty(w)&&(M[w]=H),A&&T(),S}}}),Object.keys(s).forEach(function(P){S[P]=function(){for(var z,$=arguments.length,w=new Array($),N=0;N<$;N++)w[N]=arguments[N];return(z=s[P]).call.apply(z,[S,k].concat(w))}}),Object.entries(u).forEach(function(P){var z=_u(P,2),$=z[0],w=z[1];return S[$]=S[w]}),S.resetProps=function(){return d.forEach(function(P){S[P.name](P.defaultVal)}),S},S.resetProps(),k._rerender=T,b&&C&&S(C),S}}var q=function(e){return typeof e=="function"?e:typeof e=="string"?function(n){return n[e]}:function(n){return e}};function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},je(e)}var xu=/^\s+/,bu=/\s+$/;function R(e,n){if(e=e||"",n=n||{},e instanceof R)return e;if(!(this instanceof R))return new R(e,n);var r=wu(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}R.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),r,i,o,a,s,l;return r=n.r/255,i=n.g/255,o=n.b/255,r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),o<=.03928?l=o/12.92:l=Math.pow((o+.055)/1.055,2.4),.2126*a+.7152*s+.0722*l},setAlpha:function(n){return this._a=Ci(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=_r(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=_r(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+o+"%)":"hsva("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var n=yr(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=yr(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+o+"%)":"hsla("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(n){return vr(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return Su(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(W(this._r,255)*100)+"%",g:Math.round(W(this._g,255)*100)+"%",b:Math.round(W(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(W(this._r,255)*100)+"%, "+Math.round(W(this._g,255)*100)+"%, "+Math.round(W(this._b,255)*100)+"%)":"rgba("+Math.round(W(this._r,255)*100)+"%, "+Math.round(W(this._g,255)*100)+"%, "+Math.round(W(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Lu[vr(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var r="#"+mr(this._r,this._g,this._b,this._a),i=r,o=this._gradientType?"GradientType = 1, ":"";if(n){var a=R(n);i="#"+mr(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+i+")"},toString:function(n){var r=!!n;n=n||this._format;var i=!1,o=this._a<1&&this._a>=0,a=!r&&o&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return a?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return R(this.toString())},_applyModification:function(n,r){var i=n.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Nu,arguments)},brighten:function(){return this._applyModification(Pu,arguments)},darken:function(){return this._applyModification(Ou,arguments)},desaturate:function(){return this._applyModification(Au,arguments)},saturate:function(){return this._applyModification(Eu,arguments)},greyscale:function(){return this._applyModification(Tu,arguments)},spin:function(){return this._applyModification(zu,arguments)},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Du,arguments)},complement:function(){return this._applyCombination(Iu,arguments)},monochromatic:function(){return this._applyCombination($u,arguments)},splitcomplement:function(){return this._applyCombination(Ru,arguments)},triad:function(){return this._applyCombination(xr,[3])},tetrad:function(){return this._applyCombination(xr,[4])}};R.fromRatio=function(e,n){if(je(e)=="object"){var r={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?r[i]=e[i]:r[i]=ie(e[i]));e=r}return R(e,n)};function wu(e){var n={r:0,g:0,b:0},r=1,i=null,o=null,a=null,s=!1,l=!1;return typeof e=="string"&&(e=Hu(e)),je(e)=="object"&&(kt(e.r)&&kt(e.g)&&kt(e.b)?(n=ku(e.r,e.g,e.b),s=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):kt(e.h)&&kt(e.s)&&kt(e.v)?(i=ie(e.s),o=ie(e.v),n=Mu(e.h,i,o),s=!0,l="hsv"):kt(e.h)&&kt(e.s)&&kt(e.l)&&(i=ie(e.s),a=ie(e.l),n=Cu(e.h,i,a),s=!0,l="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=Ci(r),{ok:s,format:e.format||l,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function ku(e,n,r){return{r:W(e,255)*255,g:W(n,255)*255,b:W(r,255)*255}}function yr(e,n,r){e=W(e,255),n=W(n,255),r=W(r,255);var i=Math.max(e,n,r),o=Math.min(e,n,r),a,s,l=(i+o)/2;if(i==o)a=s=0;else{var u=i-o;switch(s=l>.5?u/(2-i-o):u/(i+o),i){case e:a=(n-r)/u+(n<r?6:0);break;case n:a=(r-e)/u+2;break;case r:a=(e-n)/u+4;break}a/=6}return{h:a,s,l}}function Cu(e,n,r){var i,o,a;e=W(e,360),n=W(n,100),r=W(r,100);function s(f,h,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?f+(h-f)*6*c:c<1/2?h:c<2/3?f+(h-f)*(2/3-c)*6:f}if(n===0)i=o=a=r;else{var l=r<.5?r*(1+n):r+n-r*n,u=2*r-l;i=s(u,l,e+1/3),o=s(u,l,e),a=s(u,l,e-1/3)}return{r:i*255,g:o*255,b:a*255}}function _r(e,n,r){e=W(e,255),n=W(n,255),r=W(r,255);var i=Math.max(e,n,r),o=Math.min(e,n,r),a,s,l=i,u=i-o;if(s=i===0?0:u/i,i==o)a=0;else{switch(i){case e:a=(n-r)/u+(n<r?6:0);break;case n:a=(r-e)/u+2;break;case r:a=(e-n)/u+4;break}a/=6}return{h:a,s,v:l}}function Mu(e,n,r){e=W(e,360)*6,n=W(n,100),r=W(r,100);var i=Math.floor(e),o=e-i,a=r*(1-n),s=r*(1-o*n),l=r*(1-(1-o)*n),u=i%6,f=[r,s,a,a,l,r][u],h=[l,r,r,s,a,a][u],c=[a,a,l,r,r,s][u];return{r:f*255,g:h*255,b:c*255}}function vr(e,n,r,i){var o=[ht(Math.round(e).toString(16)),ht(Math.round(n).toString(16)),ht(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function Su(e,n,r,i,o){var a=[ht(Math.round(e).toString(16)),ht(Math.round(n).toString(16)),ht(Math.round(r).toString(16)),ht(Mi(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function mr(e,n,r,i){var o=[ht(Mi(i)),ht(Math.round(e).toString(16)),ht(Math.round(n).toString(16)),ht(Math.round(r).toString(16))];return o.join("")}R.equals=function(e,n){return!e||!n?!1:R(e).toRgbString()==R(n).toRgbString()};R.random=function(){return R.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Au(e,n){n=n===0?0:n||10;var r=R(e).toHsl();return r.s-=n/100,r.s=Ve(r.s),R(r)}function Eu(e,n){n=n===0?0:n||10;var r=R(e).toHsl();return r.s+=n/100,r.s=Ve(r.s),R(r)}function Tu(e){return R(e).desaturate(100)}function Nu(e,n){n=n===0?0:n||10;var r=R(e).toHsl();return r.l+=n/100,r.l=Ve(r.l),R(r)}function Pu(e,n){n=n===0?0:n||10;var r=R(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),R(r)}function Ou(e,n){n=n===0?0:n||10;var r=R(e).toHsl();return r.l-=n/100,r.l=Ve(r.l),R(r)}function zu(e,n){var r=R(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,R(r)}function Iu(e){var n=R(e).toHsl();return n.h=(n.h+180)%360,R(n)}function xr(e,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var r=R(e).toHsl(),i=[R(e)],o=360/n,a=1;a<n;a++)i.push(R({h:(r.h+a*o)%360,s:r.s,l:r.l}));return i}function Ru(e){var n=R(e).toHsl(),r=n.h;return[R(e),R({h:(r+72)%360,s:n.s,l:n.l}),R({h:(r+216)%360,s:n.s,l:n.l})]}function Du(e,n,r){n=n||6,r=r||30;var i=R(e).toHsl(),o=360/r,a=[R(e)];for(i.h=(i.h-(o*n>>1)+720)%360;--n;)i.h=(i.h+o)%360,a.push(R(i));return a}function $u(e,n){n=n||6;for(var r=R(e).toHsv(),i=r.h,o=r.s,a=r.v,s=[],l=1/n;n--;)s.push(R({h:i,s:o,v:a})),a=(a+l)%1;return s}R.mix=function(e,n,r){r=r===0?0:r||50;var i=R(e).toRgb(),o=R(n).toRgb(),a=r/100,s={r:(o.r-i.r)*a+i.r,g:(o.g-i.g)*a+i.g,b:(o.b-i.b)*a+i.b,a:(o.a-i.a)*a+i.a};return R(s)};R.readability=function(e,n){var r=R(e),i=R(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};R.isReadable=function(e,n,r){var i=R.readability(e,n),o,a;switch(a=!1,o=qu(r),o.level+o.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a};R.mostReadable=function(e,n,r){var i=null,o=0,a,s,l,u;r=r||{},s=r.includeFallbackColors,l=r.level,u=r.size;for(var f=0;f<n.length;f++)a=R.readability(e,n[f]),a>o&&(o=a,i=R(n[f]));return R.isReadable(e,i,{level:l,size:u})||!s?i:(r.includeFallbackColors=!1,R.mostReadable(e,["#fff","#000"],r))};var _n=R.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Lu=R.hexNames=Fu(_n);function Fu(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}function Ci(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function W(e,n){ju(e)&&(e="100%");var r=Uu(e);return e=Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function Ve(e){return Math.min(1,Math.max(0,e))}function nt(e){return parseInt(e,16)}function ju(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function Uu(e){return typeof e=="string"&&e.indexOf("%")!=-1}function ht(e){return e.length==1?"0"+e:""+e}function ie(e){return e<=1&&(e=e*100+"%"),e}function Mi(e){return Math.round(parseFloat(e)*255).toString(16)}function br(e){return nt(e)/255}var ft=function(){var e="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",r="(?:"+n+")|(?:"+e+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function kt(e){return!!ft.CSS_UNIT.exec(e)}function Hu(e){e=e.replace(xu,"").replace(bu,"").toLowerCase();var n=!1;if(_n[e])e=_n[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=ft.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=ft.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=ft.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=ft.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=ft.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=ft.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=ft.hex8.exec(e))?{r:nt(r[1]),g:nt(r[2]),b:nt(r[3]),a:br(r[4]),format:n?"name":"hex8"}:(r=ft.hex6.exec(e))?{r:nt(r[1]),g:nt(r[2]),b:nt(r[3]),format:n?"name":"hex"}:(r=ft.hex4.exec(e))?{r:nt(r[1]+""+r[1]),g:nt(r[2]+""+r[2]),b:nt(r[3]+""+r[3]),a:br(r[4]+""+r[4]),format:n?"name":"hex8"}:(r=ft.hex3.exec(e))?{r:nt(r[1]+""+r[1]),g:nt(r[2]+""+r[2]),b:nt(r[3]+""+r[3]),format:n?"name":"hex"}:!1}function qu(e){var n,r;return e=e||{level:"AA",size:"small"},n=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:n,size:r}}function vn(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function Bu(e){if(Array.isArray(e))return vn(e)}function Si(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function Gu(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wu(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function it(e,n){return e.get(Si(e,n))}function wr(e,n,r){Gu(e,n),n.set(e,r)}function kr(e,n,r){return e.set(Si(e,n),r),r}function Vu(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ju(i.key),i)}}function Xu(e,n,r){return n&&Vu(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yu(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ku(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zu(e){return Bu(e)||Yu(e)||tf(e)||Ku()}function Qu(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ju(e){var n=Qu(e,"string");return typeof n=="symbol"?n:n+""}function tf(e,n){if(e){if(typeof e=="string")return vn(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vn(e,n):void 0}}var ef=123,nf=function(n){return"#".concat(Math.min(n,Math.pow(2,24)).toString(16).padStart(6,"0"))},Ai=function(n,r,i){return(n<<16)+(r<<8)+i},rf=function(n){var r=R(n).toRgb(),i=r.r,o=r.g,a=r.b;return Ai(i,o,a)},Cr=function(n,r){return n*ef%Math.pow(2,r)},It=new WeakMap,Ct=new WeakMap,of=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Wu(this,e),wr(this,It,void 0),wr(this,Ct,void 0),kr(Ct,this,n),this.reset()}return Xu(e,[{key:"reset",value:function(){kr(It,this,["__reserved for background__"])}},{key:"register",value:function(r){if(it(It,this).length>=Math.pow(2,24-it(Ct,this)))return null;var i=it(It,this).length,o=Cr(i,it(Ct,this)),a=nf(i+(o<<24-it(Ct,this)));return it(It,this).push(r),a}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?rf(r):Ai.apply(void 0,Zu(r));if(!i)return null;var o=i&Math.pow(2,24-it(Ct,this))-1,a=i>>24-it(Ct,this)&Math.pow(2,it(Ct,this))-1;return Cr(o,it(Ct,this))!==a||o>=it(It,this).length?null:it(It,this)[o]}}])}(),ve,V,Ei,Ti,Rt,Mr,Ni,Pi,Oi,Rn,mn,xn,de={},zi=[],af=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Xe=Array.isArray;function yt(e,n){for(var r in n)e[r]=n[r];return e}function Dn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function sf(e,n,r){var i,o,a,s={};for(a in n)a=="key"?i=n[a]:a=="ref"?o=n[a]:s[a]=n[a];if(arguments.length>2&&(s.children=arguments.length>3?ve.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return oe(e,s,i,o,null)}function oe(e,n,r,i,o){var a={type:e,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Ei,__i:-1,__u:0};return o==null&&V.vnode!=null&&V.vnode(a),a}function Ye(e){return e.children}function Pe(e,n){this.props=e,this.context=n}function Wt(e,n){if(n==null)return e.__?Wt(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Wt(e):null}function Ii(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Ii(e)}}function Sr(e){(!e.__d&&(e.__d=!0)&&Rt.push(e)&&!Ue.__r++||Mr!=V.debounceRendering)&&((Mr=V.debounceRendering)||Ni)(Ue)}function Ue(){for(var e,n,r,i,o,a,s,l=1;Rt.length;)Rt.length>l&&Rt.sort(Pi),e=Rt.shift(),l=Rt.length,e.__d&&(r=void 0,i=void 0,o=(i=(n=e).__v).__e,a=[],s=[],n.__P&&((r=yt({},i)).__v=i.__v+1,V.vnode&&V.vnode(r),$n(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[o]:null,a,o??Wt(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,$i(a,r,s),i.__e=i.__=null,r.__e!=o&&Ii(r)));Ue.__r=0}function Ri(e,n,r,i,o,a,s,l,u,f,h){var c,g,d,y,_,v,p,b=i&&i.__k||zi,C=n.length;for(u=lf(r,n,b,u,C),c=0;c<C;c++)(d=r.__k[c])!=null&&(g=d.__i==-1?de:b[d.__i]||de,d.__i=c,v=$n(e,d,g,o,a,s,l,u,f,h),y=d.__e,d.ref&&g.ref!=d.ref&&(g.ref&&Ln(g.ref,null,d),h.push(d.ref,d.__c||y,d)),_==null&&y!=null&&(_=y),(p=!!(4&d.__u))||g.__k===d.__k?u=Di(d,u,e,p):typeof d.type=="function"&&v!==void 0?u=v:y&&(u=y.nextSibling),d.__u&=-7);return r.__e=_,u}function lf(e,n,r,i,o){var a,s,l,u,f,h=r.length,c=h,g=0;for(e.__k=new Array(o),a=0;a<o;a++)(s=n[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[a]=oe(null,s,null,null,null):Xe(s)?s=e.__k[a]=oe(Ye,{children:s},null,null,null):s.constructor==null&&s.__b>0?s=e.__k[a]=oe(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[a]=s,u=a+g,s.__=e,s.__b=e.__b+1,l=null,(f=s.__i=uf(s,r,u,c))!=-1&&(c--,(l=r[f])&&(l.__u|=2)),l==null||l.__v==null?(f==-1&&(o>h?g--:o<h&&g++),typeof s.type!="function"&&(s.__u|=4)):f!=u&&(f==u-1?g--:f==u+1?g++:(f>u?g--:g++,s.__u|=4))):e.__k[a]=null;if(c)for(a=0;a<h;a++)(l=r[a])!=null&&!(2&l.__u)&&(l.__e==i&&(i=Wt(l)),Fi(l,l));return i}function Di(e,n,r,i){var o,a;if(typeof e.type=="function"){for(o=e.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=e,n=Di(o[a],n,r,i));return n}e.__e!=n&&(i&&(n&&e.type&&!n.parentNode&&(n=Wt(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function uf(e,n,r,i){var o,a,s,l=e.key,u=e.type,f=n[r],h=f!=null&&(2&f.__u)==0;if(f===null&&l==null||h&&l==f.key&&u==f.type)return r;if(i>(h?1:0)){for(o=r-1,a=r+1;o>=0||a<n.length;)if((f=n[s=o>=0?o--:a++])!=null&&!(2&f.__u)&&l==f.key&&u==f.type)return s}return-1}function Ar(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||af.test(n)?r:r+"px"}function Ce(e,n,r,i,o){var a,s;t:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)r&&n in r||Ar(e.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||Ar(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")a=n!=(n=n.replace(Oi,"$1")),s=n.toLowerCase(),n=s in e||n=="onFocusOut"||n=="onFocusIn"?s.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+a]=r,r?i?r.u=i.u:(r.u=Rn,e.addEventListener(n,a?xn:mn,a)):e.removeEventListener(n,a?xn:mn,a);else{if(o=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break t}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function Er(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=Rn++;else if(n.t<r.u)return;return r(V.event?V.event(n):n)}}}function $n(e,n,r,i,o,a,s,l,u,f){var h,c,g,d,y,_,v,p,b,C,m,x,k,M,S,O,T,P=n.type;if(n.constructor!=null)return null;128&r.__u&&(u=!!(32&r.__u),a=[l=n.__e=r.__e]),(h=V.__b)&&h(n);t:if(typeof P=="function")try{if(p=n.props,b="prototype"in P&&P.prototype.render,C=(h=P.contextType)&&i[h.__c],m=h?C?C.props.value:h.__:i,r.__c?v=(c=n.__c=r.__c).__=c.__E:(b?n.__c=c=new P(p,m):(n.__c=c=new Pe(p,m),c.constructor=P,c.render=cf),C&&C.sub(c),c.state||(c.state={}),c.__n=i,g=c.__d=!0,c.__h=[],c._sb=[]),b&&c.__s==null&&(c.__s=c.state),b&&P.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=yt({},c.__s)),yt(c.__s,P.getDerivedStateFromProps(p,c.__s))),d=c.props,y=c.state,c.__v=n,g)b&&P.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),b&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(b&&P.getDerivedStateFromProps==null&&p!==d&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(p,m),n.__v==r.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(p,c.__s,m)===!1){for(n.__v!=r.__v&&(c.props=p,c.state=c.__s,c.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(z){z&&(z.__=n)}),x=0;x<c._sb.length;x++)c.__h.push(c._sb[x]);c._sb=[],c.__h.length&&s.push(c);break t}c.componentWillUpdate!=null&&c.componentWillUpdate(p,c.__s,m),b&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(d,y,_)})}if(c.context=m,c.props=p,c.__P=e,c.__e=!1,k=V.__r,M=0,b){for(c.state=c.__s,c.__d=!1,k&&k(n),h=c.render(c.props,c.state,c.context),S=0;S<c._sb.length;S++)c.__h.push(c._sb[S]);c._sb=[]}else do c.__d=!1,k&&k(n),h=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++M<25);c.state=c.__s,c.getChildContext!=null&&(i=yt(yt({},i),c.getChildContext())),b&&!g&&c.getSnapshotBeforeUpdate!=null&&(_=c.getSnapshotBeforeUpdate(d,y)),O=h,h!=null&&h.type===Ye&&h.key==null&&(O=Li(h.props.children)),l=Ri(e,Xe(O)?O:[O],n,r,i,o,a,s,l,u,f),c.base=n.__e,n.__u&=-161,c.__h.length&&s.push(c),v&&(c.__E=c.__=null)}catch(z){if(n.__v=null,u||a!=null)if(z.then){for(n.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,n.__e=l}else{for(T=a.length;T--;)Dn(a[T]);bn(n)}else n.__e=r.__e,n.__k=r.__k,z.then||bn(n);V.__e(z,n,r)}else a==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):l=n.__e=ff(r.__e,n,r,i,o,a,s,u,f);return(h=V.diffed)&&h(n),128&n.__u?void 0:l}function bn(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(bn)}function $i(e,n,r){for(var i=0;i<r.length;i++)Ln(r[i],r[++i],r[++i]);V.__c&&V.__c(n,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(a){a.call(o)})}catch(a){V.__e(a,o.__v)}})}function Li(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Xe(e)?e.map(Li):yt({},e)}function ff(e,n,r,i,o,a,s,l,u){var f,h,c,g,d,y,_,v=r.props||de,p=n.props,b=n.type;if(b=="svg"?o="http://www.w3.org/2000/svg":b=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(f=0;f<a.length;f++)if((d=a[f])&&"setAttribute"in d==!!b&&(b?d.localName==b:d.nodeType==3)){e=d,a[f]=null;break}}if(e==null){if(b==null)return document.createTextNode(p);e=document.createElementNS(o,b,p.is&&p),l&&(V.__m&&V.__m(n,a),l=!1),a=null}if(b==null)v===p||l&&e.data==p||(e.data=p);else{if(a=a&&ve.call(e.childNodes),!l&&a!=null)for(v={},f=0;f<e.attributes.length;f++)v[(d=e.attributes[f]).name]=d.value;for(f in v)if(d=v[f],f!="children"){if(f=="dangerouslySetInnerHTML")c=d;else if(!(f in p)){if(f=="value"&&"defaultValue"in p||f=="checked"&&"defaultChecked"in p)continue;Ce(e,f,null,d,o)}}for(f in p)d=p[f],f=="children"?g=d:f=="dangerouslySetInnerHTML"?h=d:f=="value"?y=d:f=="checked"?_=d:l&&typeof d!="function"||v[f]===d||Ce(e,f,d,v[f],o);if(h)l||c&&(h.__html==c.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),n.__k=[];else if(c&&(e.innerHTML=""),Ri(n.type=="template"?e.content:e,Xe(g)?g:[g],n,r,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:r.__k&&Wt(r,0),l,u),a!=null)for(f=a.length;f--;)Dn(a[f]);l||(f="value",b=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[f]||b=="progress"&&!y||b=="option"&&y!=v[f])&&Ce(e,f,y,v[f],o),f="checked",_!=null&&_!=e[f]&&Ce(e,f,_,v[f],o))}return e}function Ln(e,n,r){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&n==null||(e.__u=e(n))}else e.current=n}catch(o){V.__e(o,r)}}function Fi(e,n,r){var i,o;if(V.unmount&&V.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||Ln(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){V.__e(a,n)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&Fi(i[o],n,r||typeof e.type!="function");r||Dn(e.__e),e.__c=e.__=e.__e=void 0}function cf(e,n,r){return this.constructor(e,r)}function hf(e,n,r){var i,o,a,s;n==document&&(n=document.documentElement),V.__&&V.__(e,n),o=(i=!1)?null:n.__k,a=[],s=[],$n(n,e=n.__k=sf(Ye,null,[e]),o||de,de,n.namespaceURI,o?null:n.firstChild?ve.call(n.childNodes):null,a,o?o.__e:n.firstChild,i,s),$i(a,e,s)}function ji(e,n,r){var i,o,a,s,l=yt({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),n)a=="key"?i=n[a]:a=="ref"?o=n[a]:l[a]=n[a]===void 0&&s!=null?s[a]:n[a];return arguments.length>2&&(l.children=arguments.length>3?ve.call(arguments,2):r),oe(e.type,l,i||e.key,o||e.ref,null)}ve=zi.slice,V={__e:function(e,n,r,i){for(var o,a,s;n=n.__;)if((o=n.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),s=o.__d),s)return o.__E=o}catch(l){e=l}throw e}},Ei=0,Ti=function(e){return e!=null&&e.constructor==null},Pe.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=yt({},this.state),typeof e=="function"&&(e=e(yt({},r),this.props)),e&&yt(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),Sr(this))},Pe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Sr(this))},Pe.prototype.render=Ye,Rt=[],Ni=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Pi=function(e,n){return e.__v.__b-n.__v.__b},Ue.__r=0,Oi=/(PointerCapture)$|Capture$/i,Rn=0,mn=Er(!1),xn=Er(!0);function Tr(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function df(e){if(Array.isArray(e))return e}function gf(e,n,r){return(n=xf(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function pf(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,l=[],u=!0,f=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw o}}return l}}function yf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function _f(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Nr(Object(r),!0).forEach(function(i){gf(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nr(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function vf(e,n){return df(e)||pf(e,n)||bf(e,n)||yf()}function mf(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function xf(e){var n=mf(e,"string");return typeof n=="symbol"?n:n+""}function He(e){"@babel/helpers - typeof";return He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},He(e)}function bf(e,n){if(e){if(typeof e=="string")return Tr(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tr(e,n):void 0}}var wn=function(n){if(He(n)!=="object")return n;var r=ji(n);if(r.props){var i;r.props=_f({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(wn):wn(r.props.children))}return r},wf=function(n){return Ti(ji(n))},kf=function(n,r){delete r.__k,hf(wn(n),r)};function Cf(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var Mf=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;Cf(Mf);var Sf=In({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.style,a=o===void 0?{}:o,s=!!n&&He(n)==="object"&&!!n.node&&typeof n.node=="function",l=at(s?n.node():n);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(f){var h=vf(f,2),c=h[0],g=h[1];return r.tooltipEl.style(c,g)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(u),function(f){r.mouseInside=!0;var h=pt(f),c=l.node(),g=c.offsetWidth,d=c.offsetHeight,y=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/g*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?d>130&&d-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(y.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(n){n.tooltipEl.style("display",n.content&&n.mouseInside?"inline":"none"),n.content?n.content instanceof HTMLElement?(n.tooltipEl.text(""),n.tooltipEl.append(function(){return n.content})):typeof n.content=="string"?n.tooltipEl.html(n.content):wf(n.content)?(n.tooltipEl.text(""),kf(n.content,n.tooltipEl.node())):(n.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",n.content,n.content.toString())):n.tooltipEl.text("")}});function Af(e,n,r){var i,o=1;e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function a(){var s,l=i.length,u,f=0,h=0,c=0;for(s=0;s<l;++s)u=i[s],f+=u.x||0,h+=u.y||0,c+=u.z||0;for(f=(f/l-e)*o,h=(h/l-n)*o,c=(c/l-r)*o,s=0;s<l;++s)u=i[s],f&&(u.x-=f),h&&(u.y-=h),c&&(u.z-=c)}return a.initialize=function(s){i=s},a.x=function(s){return arguments.length?(e=+s,a):e},a.y=function(s){return arguments.length?(n=+s,a):n},a.z=function(s){return arguments.length?(r=+s,a):r},a.strength=function(s){return arguments.length?(o=+s,a):o},a}function Ef(e){const n=+this._x.call(null,e);return Ui(this.cover(n),n,e)}function Ui(e,n,r){if(isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,l=e._x1,u,f,h,c,g;if(!o)return e._root=a,e;for(;o.length;)if((h=n>=(u=(s+l)/2))?s=u:l=u,i=o,!(o=o[c=+h]))return i[c]=a,e;if(f=+e._x.call(null,o.data),n===f)return a.next=o,i?i[c]=a:e._root=a,e;do i=i?i[c]=new Array(2):e._root=new Array(2),(h=n>=(u=(s+l)/2))?s=u:l=u;while((c=+h)==(g=+(f>=u)));return i[g]=o,i[c]=a,e}function Tf(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n);let i=1/0,o=-1/0;for(let a=0,s;a<n;++a)isNaN(s=+this._x.call(null,e[a]))||(r[a]=s,s<i&&(i=s),s>o&&(o=s));if(i>o)return this;this.cover(i).cover(o);for(let a=0;a<n;++a)Ui(this,r[a],e[a]);return this}function Nf(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i=r-n||1,o=this._root,a,s;n>e||e>=r;)switch(s=+(e<n),a=new Array(2),a[s]=o,o=a,i*=2,s){case 0:r=n+i;break;case 1:n=r-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._x1=r,this}function Pf(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function Of(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Tt(e,n,r){this.node=e,this.x0=n,this.x1=r}function zf(e,n){var r,i=this._x0,o,a,s=this._x1,l=[],u=this._root,f,h;for(u&&l.push(new Tt(u,i,s)),n==null?n=1/0:(i=e-n,s=e+n);f=l.pop();)if(!(!(u=f.node)||(o=f.x0)>s||(a=f.x1)<i))if(u.length){var c=(o+a)/2;l.push(new Tt(u[1],c,a),new Tt(u[0],o,c)),(h=+(e>=c))&&(f=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=f)}else{var g=Math.abs(e-+this._x.call(null,u.data));g<n&&(n=g,i=e-g,s=e+g,r=u.data)}return r}function If(e){if(isNaN(u=+this._x.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,l=this._x1,u,f,h,c,g;if(!r)return this;if(r.length)for(;;){if((h=u>=(f=(s+l)/2))?s=f:l=f,n=r,!(r=r[c=+h]))return this;if(!r.length)break;n[c+1&1]&&(i=n,g=c)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[c]=a:delete n[c],(r=n[0]||n[1])&&r===(n[1]||n[0])&&!r.length&&(i?i[g]=r:this._root=r),this):(this._root=a,this)}function Rf(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function Df(){return this._root}function $f(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function Lf(e){var n=[],r,i=this._root,o,a,s;for(i&&n.push(new Tt(i,this._x0,this._x1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.x1)&&i.length){var l=(a+s)/2;(o=i[1])&&n.push(new Tt(o,l,s)),(o=i[0])&&n.push(new Tt(o,a,l))}return this}function Ff(e){var n=[],r=[],i;for(this._root&&n.push(new Tt(this._root,this._x0,this._x1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,l=i.x1,u=(s+l)/2;(a=o[0])&&n.push(new Tt(a,s,u)),(a=o[1])&&n.push(new Tt(a,u,l))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.x1);return this}function jf(e){return e[0]}function Uf(e){return arguments.length?(this._x=e,this):this._x}function Hi(e,n){var r=new Fn(n??jf,NaN,NaN);return e==null?r:r.addAll(e)}function Fn(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function Pr(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var et=Hi.prototype=Fn.prototype;et.copy=function(){var e=new Fn(this._x,this._x0,this._x1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Pr(n),e;for(r=[{source:n,target:e._root=new Array(2)}];n=r.pop();)for(var o=0;o<2;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(2)}):n.target[o]=Pr(i));return e};et.add=Ef;et.addAll=Tf;et.cover=Nf;et.data=Pf;et.extent=Of;et.find=zf;et.remove=If;et.removeAll=Rf;et.root=Df;et.size=$f;et.visit=Lf;et.visitAfter=Ff;et.x=Uf;function Hf(e){const n=+this._x.call(null,e),r=+this._y.call(null,e);return qi(this.cover(n,r),n,r,e)}function qi(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var o,a=e._root,s={data:i},l=e._x0,u=e._y0,f=e._x1,h=e._y1,c,g,d,y,_,v,p,b;if(!a)return e._root=s,e;for(;a.length;)if((_=n>=(c=(l+f)/2))?l=c:f=c,(v=r>=(g=(u+h)/2))?u=g:h=g,o=a,!(a=a[p=v<<1|_]))return o[p]=s,e;if(d=+e._x.call(null,a.data),y=+e._y.call(null,a.data),n===d&&r===y)return s.next=a,o?o[p]=s:e._root=s,e;do o=o?o[p]=new Array(4):e._root=new Array(4),(_=n>=(c=(l+f)/2))?l=c:f=c,(v=r>=(g=(u+h)/2))?u=g:h=g;while((p=v<<1|_)===(b=(y>=g)<<1|d>=c));return o[b]=a,o[p]=s,e}function qf(e){var n,r,i=e.length,o,a,s=new Array(i),l=new Array(i),u=1/0,f=1/0,h=-1/0,c=-1/0;for(r=0;r<i;++r)isNaN(o=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(s[r]=o,l[r]=a,o<u&&(u=o),o>h&&(h=o),a<f&&(f=a),a>c&&(c=a));if(u>h||f>c)return this;for(this.cover(u,f).cover(h,c),r=0;r<i;++r)qi(this,s[r],l[r],e[r]);return this}function Bf(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._x1,a=this._y1;if(isNaN(r))o=(r=Math.floor(e))+1,a=(i=Math.floor(n))+1;else{for(var s=o-r||1,l=this._root,u,f;r>e||e>=o||i>n||n>=a;)switch(f=(n<i)<<1|e<r,u=new Array(4),u[f]=l,l=u,s*=2,f){case 0:o=r+s,a=i+s;break;case 1:r=o-s,a=i+s;break;case 2:o=r+s,i=a-s;break;case 3:r=o-s,i=a-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=o,this._y1=a,this}function Gf(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function Wf(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Q(e,n,r,i,o){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=o}function Vf(e,n,r){var i,o=this._x0,a=this._y0,s,l,u,f,h=this._x1,c=this._y1,g=[],d=this._root,y,_;for(d&&g.push(new Q(d,o,a,h,c)),r==null?r=1/0:(o=e-r,a=n-r,h=e+r,c=n+r,r*=r);y=g.pop();)if(!(!(d=y.node)||(s=y.x0)>h||(l=y.y0)>c||(u=y.x1)<o||(f=y.y1)<a))if(d.length){var v=(s+u)/2,p=(l+f)/2;g.push(new Q(d[3],v,p,u,f),new Q(d[2],s,p,v,f),new Q(d[1],v,l,u,p),new Q(d[0],s,l,v,p)),(_=(n>=p)<<1|e>=v)&&(y=g[g.length-1],g[g.length-1]=g[g.length-1-_],g[g.length-1-_]=y)}else{var b=e-+this._x.call(null,d.data),C=n-+this._y.call(null,d.data),m=b*b+C*C;if(m<r){var x=Math.sqrt(r=m);o=e-x,a=n-x,h=e+x,c=n+x,i=d.data}}return i}function Xf(e){if(isNaN(h=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,l=this._y0,u=this._x1,f=this._y1,h,c,g,d,y,_,v,p;if(!r)return this;if(r.length)for(;;){if((y=h>=(g=(s+u)/2))?s=g:u=g,(_=c>=(d=(l+f)/2))?l=d:f=d,n=r,!(r=r[v=_<<1|y]))return this;if(!r.length)break;(n[v+1&3]||n[v+2&3]||n[v+3&3])&&(i=n,p=v)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[v]=a:delete n[v],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[p]=r:this._root=r),this):(this._root=a,this)}function Yf(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function Kf(){return this._root}function Zf(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function Qf(e){var n=[],r,i=this._root,o,a,s,l,u;for(i&&n.push(new Q(i,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.y0,l=r.x1,u=r.y1)&&i.length){var f=(a+l)/2,h=(s+u)/2;(o=i[3])&&n.push(new Q(o,f,h,l,u)),(o=i[2])&&n.push(new Q(o,a,h,f,u)),(o=i[1])&&n.push(new Q(o,f,s,l,h)),(o=i[0])&&n.push(new Q(o,a,s,f,h))}return this}function Jf(e){var n=[],r=[],i;for(this._root&&n.push(new Q(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,l=i.y0,u=i.x1,f=i.y1,h=(s+u)/2,c=(l+f)/2;(a=o[0])&&n.push(new Q(a,s,l,h,c)),(a=o[1])&&n.push(new Q(a,h,l,u,c)),(a=o[2])&&n.push(new Q(a,s,c,h,f)),(a=o[3])&&n.push(new Q(a,h,c,u,f))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function tc(e){return e[0]}function ec(e){return arguments.length?(this._x=e,this):this._x}function nc(e){return e[1]}function rc(e){return arguments.length?(this._y=e,this):this._y}function jn(e,n,r){var i=new Un(n??tc,r??nc,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Un(e,n,r,i,o,a){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=o,this._y1=a,this._root=void 0}function Or(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var J=jn.prototype=Un.prototype;J.copy=function(){var e=new Un(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Or(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var o=0;o<4;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(4)}):n.target[o]=Or(i));return e};J.add=Hf;J.addAll=qf;J.cover=Bf;J.data=Gf;J.extent=Wf;J.find=Vf;J.remove=Xf;J.removeAll=Yf;J.root=Kf;J.size=Zf;J.visit=Qf;J.visitAfter=Jf;J.x=ec;J.y=rc;function ic(e){const n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return Bi(this.cover(n,r,i),n,r,i,e)}function Bi(e,n,r,i,o){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var a,s=e._root,l={data:o},u=e._x0,f=e._y0,h=e._z0,c=e._x1,g=e._y1,d=e._z1,y,_,v,p,b,C,m,x,k,M,S;if(!s)return e._root=l,e;for(;s.length;)if((m=n>=(y=(u+c)/2))?u=y:c=y,(x=r>=(_=(f+g)/2))?f=_:g=_,(k=i>=(v=(h+d)/2))?h=v:d=v,a=s,!(s=s[M=k<<2|x<<1|m]))return a[M]=l,e;if(p=+e._x.call(null,s.data),b=+e._y.call(null,s.data),C=+e._z.call(null,s.data),n===p&&r===b&&i===C)return l.next=s,a?a[M]=l:e._root=l,e;do a=a?a[M]=new Array(8):e._root=new Array(8),(m=n>=(y=(u+c)/2))?u=y:c=y,(x=r>=(_=(f+g)/2))?f=_:g=_,(k=i>=(v=(h+d)/2))?h=v:d=v;while((M=k<<2|x<<1|m)===(S=(C>=v)<<2|(b>=_)<<1|p>=y));return a[S]=s,a[M]=l,e}function oc(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n),i=new Float64Array(n),o=new Float64Array(n);let a=1/0,s=1/0,l=1/0,u=-1/0,f=-1/0,h=-1/0;for(let c=0,g,d,y,_;c<n;++c)isNaN(d=+this._x.call(null,g=e[c]))||isNaN(y=+this._y.call(null,g))||isNaN(_=+this._z.call(null,g))||(r[c]=d,i[c]=y,o[c]=_,d<a&&(a=d),d>u&&(u=d),y<s&&(s=y),y>f&&(f=y),_<l&&(l=_),_>h&&(h=_));if(a>u||s>f||l>h)return this;this.cover(a,s,l).cover(u,f,h);for(let c=0;c<n;++c)Bi(this,r[c],i[c],o[c],e[c]);return this}function ac(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,a=this._z0,s=this._x1,l=this._y1,u=this._z1;if(isNaN(i))s=(i=Math.floor(e))+1,l=(o=Math.floor(n))+1,u=(a=Math.floor(r))+1;else{for(var f=s-i||1,h=this._root,c,g;i>e||e>=s||o>n||n>=l||a>r||r>=u;)switch(g=(r<a)<<2|(n<o)<<1|e<i,c=new Array(8),c[g]=h,h=c,f*=2,g){case 0:s=i+f,l=o+f,u=a+f;break;case 1:i=s-f,l=o+f,u=a+f;break;case 2:s=i+f,o=l-f,u=a+f;break;case 3:i=s-f,o=l-f,u=a+f;break;case 4:s=i+f,l=o+f,a=u-f;break;case 5:i=s-f,l=o+f,a=u-f;break;case 6:s=i+f,o=l-f,a=u-f;break;case 7:i=s-f,o=l-f,a=u-f;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=l,this._z1=u,this}function sc(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function lc(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function B(e,n,r,i,o,a,s){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=o,this.y1=a,this.z1=s}function uc(e,n,r,i){var o,a=this._x0,s=this._y0,l=this._z0,u,f,h,c,g,d,y=this._x1,_=this._y1,v=this._z1,p=[],b=this._root,C,m;for(b&&p.push(new B(b,a,s,l,y,_,v)),i==null?i=1/0:(a=e-i,s=n-i,l=r-i,y=e+i,_=n+i,v=r+i,i*=i);C=p.pop();)if(!(!(b=C.node)||(u=C.x0)>y||(f=C.y0)>_||(h=C.z0)>v||(c=C.x1)<a||(g=C.y1)<s||(d=C.z1)<l))if(b.length){var x=(u+c)/2,k=(f+g)/2,M=(h+d)/2;p.push(new B(b[7],x,k,M,c,g,d),new B(b[6],u,k,M,x,g,d),new B(b[5],x,f,M,c,k,d),new B(b[4],u,f,M,x,k,d),new B(b[3],x,k,h,c,g,M),new B(b[2],u,k,h,x,g,M),new B(b[1],x,f,h,c,k,M),new B(b[0],u,f,h,x,k,M)),(m=(r>=M)<<2|(n>=k)<<1|e>=x)&&(C=p[p.length-1],p[p.length-1]=p[p.length-1-m],p[p.length-1-m]=C)}else{var S=e-+this._x.call(null,b.data),O=n-+this._y.call(null,b.data),T=r-+this._z.call(null,b.data),P=S*S+O*O+T*T;if(P<i){var z=Math.sqrt(i=P);a=e-z,s=n-z,l=r-z,y=e+z,_=n+z,v=r+z,o=b.data}}return o}const fc=(e,n,r,i,o,a)=>Math.sqrt((e-i)**2+(n-o)**2+(r-a)**2);function cc(e,n,r,i){const o=[],a=e-i,s=n-i,l=r-i,u=e+i,f=n+i,h=r+i;return this.visit((c,g,d,y,_,v,p)=>{if(!c.length)do{const b=c.data;fc(e,n,r,this._x(b),this._y(b),this._z(b))<=i&&o.push(b)}while(c=c.next);return g>u||d>f||y>h||_<a||v<s||p<l}),o}function hc(e){if(isNaN(g=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e))||isNaN(y=+this._z.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,l=this._y0,u=this._z0,f=this._x1,h=this._y1,c=this._z1,g,d,y,_,v,p,b,C,m,x,k;if(!r)return this;if(r.length)for(;;){if((b=g>=(_=(s+f)/2))?s=_:f=_,(C=d>=(v=(l+h)/2))?l=v:h=v,(m=y>=(p=(u+c)/2))?u=p:c=p,n=r,!(r=r[x=m<<2|C<<1|b]))return this;if(!r.length)break;(n[x+1&7]||n[x+2&7]||n[x+3&7]||n[x+4&7]||n[x+5&7]||n[x+6&7]||n[x+7&7])&&(i=n,k=x)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[x]=a:delete n[x],(r=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&r===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[k]=r:this._root=r),this):(this._root=a,this)}function dc(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function gc(){return this._root}function pc(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function yc(e){var n=[],r,i=this._root,o,a,s,l,u,f,h;for(i&&n.push(new B(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.y0,l=r.z0,u=r.x1,f=r.y1,h=r.z1)&&i.length){var c=(a+u)/2,g=(s+f)/2,d=(l+h)/2;(o=i[7])&&n.push(new B(o,c,g,d,u,f,h)),(o=i[6])&&n.push(new B(o,a,g,d,c,f,h)),(o=i[5])&&n.push(new B(o,c,s,d,u,g,h)),(o=i[4])&&n.push(new B(o,a,s,d,c,g,h)),(o=i[3])&&n.push(new B(o,c,g,l,u,f,d)),(o=i[2])&&n.push(new B(o,a,g,l,c,f,d)),(o=i[1])&&n.push(new B(o,c,s,l,u,g,d)),(o=i[0])&&n.push(new B(o,a,s,l,c,g,d))}return this}function _c(e){var n=[],r=[],i;for(this._root&&n.push(new B(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,l=i.y0,u=i.z0,f=i.x1,h=i.y1,c=i.z1,g=(s+f)/2,d=(l+h)/2,y=(u+c)/2;(a=o[0])&&n.push(new B(a,s,l,u,g,d,y)),(a=o[1])&&n.push(new B(a,g,l,u,f,d,y)),(a=o[2])&&n.push(new B(a,s,d,u,g,h,y)),(a=o[3])&&n.push(new B(a,g,d,u,f,h,y)),(a=o[4])&&n.push(new B(a,s,l,y,g,d,c)),(a=o[5])&&n.push(new B(a,g,l,y,f,d,c)),(a=o[6])&&n.push(new B(a,s,d,y,g,h,c)),(a=o[7])&&n.push(new B(a,g,d,y,f,h,c))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function vc(e){return e[0]}function mc(e){return arguments.length?(this._x=e,this):this._x}function xc(e){return e[1]}function bc(e){return arguments.length?(this._y=e,this):this._y}function wc(e){return e[2]}function kc(e){return arguments.length?(this._z=e,this):this._z}function Gi(e,n,r,i){var o=new Hn(n??vc,r??xc,i??wc,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?o:o.addAll(e)}function Hn(e,n,r,i,o,a,s,l,u){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=l,this._z1=u,this._root=void 0}function zr(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var K=Gi.prototype=Hn.prototype;K.copy=function(){var e=new Hn(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=zr(n),e;for(r=[{source:n,target:e._root=new Array(8)}];n=r.pop();)for(var o=0;o<8;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(8)}):n.target[o]=zr(i));return e};K.add=ic;K.addAll=oc;K.cover=ac;K.data=sc;K.extent=lc;K.find=uc;K.findAllWithinRadius=cc;K.remove=hc;K.removeAll=dc;K.root=gc;K.size=pc;K.visit=yc;K.visitAfter=_c;K.x=mc;K.y=bc;K.z=kc;function Et(e){return function(){return e}}function St(e){return(e()-.5)*1e-6}function Cc(e){return e.index}function Ir(e,n){var r=e.get(n);if(!r)throw new Error("node not found: "+n);return r}function Mc(e){var n=Cc,r=g,i,o=Et(30),a,s,l,u,f,h,c=1;e==null&&(e=[]);function g(p){return 1/Math.min(u[p.source.index],u[p.target.index])}function d(p){for(var b=0,C=e.length;b<c;++b)for(var m=0,x,k,M,S=0,O=0,T=0,P,z;m<C;++m)x=e[m],k=x.source,M=x.target,S=M.x+M.vx-k.x-k.vx||St(h),l>1&&(O=M.y+M.vy-k.y-k.vy||St(h)),l>2&&(T=M.z+M.vz-k.z-k.vz||St(h)),P=Math.sqrt(S*S+O*O+T*T),P=(P-a[m])/P*p*i[m],S*=P,O*=P,T*=P,M.vx-=S*(z=f[m]),l>1&&(M.vy-=O*z),l>2&&(M.vz-=T*z),k.vx+=S*(z=1-z),l>1&&(k.vy+=O*z),l>2&&(k.vz+=T*z)}function y(){if(s){var p,b=s.length,C=e.length,m=new Map(s.map((k,M)=>[n(k,M,s),k])),x;for(p=0,u=new Array(b);p<C;++p)x=e[p],x.index=p,typeof x.source!="object"&&(x.source=Ir(m,x.source)),typeof x.target!="object"&&(x.target=Ir(m,x.target)),u[x.source.index]=(u[x.source.index]||0)+1,u[x.target.index]=(u[x.target.index]||0)+1;for(p=0,f=new Array(C);p<C;++p)x=e[p],f[p]=u[x.source.index]/(u[x.source.index]+u[x.target.index]);i=new Array(C),_(),a=new Array(C),v()}}function _(){if(s)for(var p=0,b=e.length;p<b;++p)i[p]=+r(e[p],p,e)}function v(){if(s)for(var p=0,b=e.length;p<b;++p)a[p]=+o(e[p],p,e)}return d.initialize=function(p,...b){s=p,h=b.find(C=>typeof C=="function")||Math.random,l=b.find(C=>[1,2,3].includes(C))||2,y()},d.links=function(p){return arguments.length?(e=p,y(),d):e},d.id=function(p){return arguments.length?(n=p,d):n},d.iterations=function(p){return arguments.length?(c=+p,d):c},d.strength=function(p){return arguments.length?(r=typeof p=="function"?p:Et(+p),_(),d):r},d.distance=function(p){return arguments.length?(o=typeof p=="function"?p:Et(+p),v(),d):o},d}const Sc=1664525,Ac=1013904223,Rr=4294967296;function Ec(){let e=1;return()=>(e=(Sc*e+Ac)%Rr)/Rr}var Dr=3;function nn(e){return e.x}function $r(e){return e.y}function Tc(e){return e.z}var Nc=10,Pc=Math.PI*(3-Math.sqrt(5)),Oc=Math.PI*20/(9+Math.sqrt(221));function zc(e,n){n=n||2;var r=Math.min(Dr,Math.max(1,Math.round(n))),i,o=1,a=.001,s=1-Math.pow(a,1/300),l=0,u=.6,f=new Map,h=Nn(d),c=ye("tick","end"),g=Ec();e==null&&(e=[]);function d(){y(),c.call("tick",i),o<a&&(h.stop(),c.call("end",i))}function y(p){var b,C=e.length,m;p===void 0&&(p=1);for(var x=0;x<p;++x)for(o+=(l-o)*s,f.forEach(function(k){k(o)}),b=0;b<C;++b)m=e[b],m.fx==null?m.x+=m.vx*=u:(m.x=m.fx,m.vx=0),r>1&&(m.fy==null?m.y+=m.vy*=u:(m.y=m.fy,m.vy=0)),r>2&&(m.fz==null?m.z+=m.vz*=u:(m.z=m.fz,m.vz=0));return i}function _(){for(var p=0,b=e.length,C;p<b;++p){if(C=e[p],C.index=p,C.fx!=null&&(C.x=C.fx),C.fy!=null&&(C.y=C.fy),C.fz!=null&&(C.z=C.fz),isNaN(C.x)||r>1&&isNaN(C.y)||r>2&&isNaN(C.z)){var m=Nc*(r>2?Math.cbrt(.5+p):r>1?Math.sqrt(.5+p):p),x=p*Pc,k=p*Oc;r===1?C.x=m:r===2?(C.x=m*Math.cos(x),C.y=m*Math.sin(x)):(C.x=m*Math.sin(x)*Math.cos(k),C.y=m*Math.cos(x),C.z=m*Math.sin(x)*Math.sin(k))}(isNaN(C.vx)||r>1&&isNaN(C.vy)||r>2&&isNaN(C.vz))&&(C.vx=0,r>1&&(C.vy=0),r>2&&(C.vz=0))}}function v(p){return p.initialize&&p.initialize(e,g,r),p}return _(),i={tick:y,restart:function(){return h.restart(d),i},stop:function(){return h.stop(),i},numDimensions:function(p){return arguments.length?(r=Math.min(Dr,Math.max(1,Math.round(p))),f.forEach(v),i):r},nodes:function(p){return arguments.length?(e=p,_(),f.forEach(v),i):e},alpha:function(p){return arguments.length?(o=+p,i):o},alphaMin:function(p){return arguments.length?(a=+p,i):a},alphaDecay:function(p){return arguments.length?(s=+p,i):+s},alphaTarget:function(p){return arguments.length?(l=+p,i):l},velocityDecay:function(p){return arguments.length?(u=1-p,i):1-u},randomSource:function(p){return arguments.length?(g=p,f.forEach(v),i):g},force:function(p,b){return arguments.length>1?(b==null?f.delete(p):f.set(p,v(b)),i):f.get(p)},find:function(){var p=Array.prototype.slice.call(arguments),b=p.shift()||0,C=(r>1?p.shift():null)||0,m=(r>2?p.shift():null)||0,x=p.shift()||1/0,k=0,M=e.length,S,O,T,P,z,$;for(x*=x,k=0;k<M;++k)z=e[k],S=b-z.x,O=C-(z.y||0),T=m-(z.z||0),P=S*S+O*O+T*T,P<x&&($=z,x=P);return $},on:function(p,b){return arguments.length>1?(c.on(p,b),i):c.on(p)}}}function Ic(){var e,n,r,i,o,a=Et(-30),s,l=1,u=1/0,f=.81;function h(y){var _,v=e.length,p=(n===1?Hi(e,nn):n===2?jn(e,nn,$r):n===3?Gi(e,nn,$r,Tc):null).visitAfter(g);for(o=y,_=0;_<v;++_)r=e[_],p.visit(d)}function c(){if(e){var y,_=e.length,v;for(s=new Array(_),y=0;y<_;++y)v=e[y],s[v.index]=+a(v,y,e)}}function g(y){var _=0,v,p,b=0,C,m,x,k,M=y.length;if(M){for(C=m=x=k=0;k<M;++k)(v=y[k])&&(p=Math.abs(v.value))&&(_+=v.value,b+=p,C+=p*(v.x||0),m+=p*(v.y||0),x+=p*(v.z||0));_*=Math.sqrt(4/M),y.x=C/b,n>1&&(y.y=m/b),n>2&&(y.z=x/b)}else{v=y,v.x=v.data.x,n>1&&(v.y=v.data.y),n>2&&(v.z=v.data.z);do _+=s[v.data.index];while(v=v.next)}y.value=_}function d(y,_,v,p,b){if(!y.value)return!0;var C=[v,p,b][n-1],m=y.x-r.x,x=n>1?y.y-r.y:0,k=n>2?y.z-r.z:0,M=C-_,S=m*m+x*x+k*k;if(M*M/f<S)return S<u&&(m===0&&(m=St(i),S+=m*m),n>1&&x===0&&(x=St(i),S+=x*x),n>2&&k===0&&(k=St(i),S+=k*k),S<l&&(S=Math.sqrt(l*S)),r.vx+=m*y.value*o/S,n>1&&(r.vy+=x*y.value*o/S),n>2&&(r.vz+=k*y.value*o/S)),!0;if(y.length||S>=u)return;(y.data!==r||y.next)&&(m===0&&(m=St(i),S+=m*m),n>1&&x===0&&(x=St(i),S+=x*x),n>2&&k===0&&(k=St(i),S+=k*k),S<l&&(S=Math.sqrt(l*S)));do y.data!==r&&(M=s[y.data.index]*o/S,r.vx+=m*M,n>1&&(r.vy+=x*M),n>2&&(r.vz+=k*M));while(y=y.next)}return h.initialize=function(y,..._){e=y,i=_.find(v=>typeof v=="function")||Math.random,n=_.find(v=>[1,2,3].includes(v))||2,c()},h.strength=function(y){return arguments.length?(a=typeof y=="function"?y:Et(+y),c(),h):a},h.distanceMin=function(y){return arguments.length?(l=y*y,h):Math.sqrt(l)},h.distanceMax=function(y){return arguments.length?(u=y*y,h):Math.sqrt(u)},h.theta=function(y){return arguments.length?(f=y*y,h):Math.sqrt(f)},h}function Rc(e,n,r,i){var o,a,s=Et(.1),l,u;typeof e!="function"&&(e=Et(+e)),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0);function f(c){for(var g=0,d=o.length;g<d;++g){var y=o[g],_=y.x-n||1e-6,v=(y.y||0)-r||1e-6,p=(y.z||0)-i||1e-6,b=Math.sqrt(_*_+v*v+p*p),C=(u[g]-b)*l[g]*c/b;y.vx+=_*C,a>1&&(y.vy+=v*C),a>2&&(y.vz+=p*C)}}function h(){if(o){var c,g=o.length;for(l=new Array(g),u=new Array(g),c=0;c<g;++c)u[c]=+e(o[c],c,o),l[c]=isNaN(u[c])?0:+s(o[c],c,o)}}return f.initialize=function(c,...g){o=c,a=g.find(d=>[1,2,3].includes(d))||2,h()},f.strength=function(c){return arguments.length?(s=typeof c=="function"?c:Et(+c),h(),f):s},f.radius=function(c){return arguments.length?(e=typeof c=="function"?c:Et(+c),h(),f):e},f.x=function(c){return arguments.length?(n=+c,f):n},f.y=function(c){return arguments.length?(r=+c,f):r},f.z=function(c){return arguments.length?(i=+c,f):i},f}const{abs:Kt,cos:Mt,sin:jt,acos:Dc,atan2:Zt,sqrt:Pt,pow:ot}=Math;function Qt(e){return e<0?-ot(-e,1/3):ot(e,1/3)}const Wi=Math.PI,Me=2*Wi,Ot=Wi/2,$c=1e-6,rn=Number.MAX_SAFE_INTEGER||9007199254740991,on=Number.MIN_SAFE_INTEGER||-9007199254740991,Lc={x:0,y:0,z:0},E={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Pt(i)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const i=n.length-1;if(e===1)return n[i].t=1,n[i];const o=1-e;let a=n;if(i===0)return n[0].t=e,n[0];if(i===1){const l={x:o*a[0].x+e*a[1].x,y:o*a[0].y+e*a[1].y,t:e};return r&&(l.z=o*a[0].z+e*a[1].z),l}if(i<4){let l=o*o,u=e*e,f,h,c,g=0;i===2?(a=[a[0],a[1],a[2],Lc],f=l,h=o*e*2,c=u):i===3&&(f=l*o,h=l*e*3,c=o*u*3,g=e*u);const d={x:f*a[0].x+h*a[1].x+c*a[2].x+g*a[3].x,y:f*a[0].y+h*a[1].y+c*a[2].y+g*a[3].y,t:e};return r&&(d.z=f*a[0].z+h*a[1].z+c*a[2].z+g*a[3].z),d}const s=JSON.parse(JSON.stringify(n));for(;s.length>1;){for(let l=0;l<s.length-1;l++)s[l]={x:s[l].x+(s[l+1].x-s[l].x)*e,y:s[l].y+(s[l+1].y-s[l].y)*e},typeof s[l].z<"u"&&(s[l].z=s[l].z+(s[l+1].z-s[l].z)*e);s.splice(s.length-1,1)}return s[0].t=e,s[0]},computeWithRatios:function(e,n,r,i){const o=1-e,a=r,s=n;let l=a[0],u=a[1],f=a[2],h=a[3],c;if(l*=o,u*=e,s.length===2)return c=l+u,{x:(l*s[0].x+u*s[1].x)/c,y:(l*s[0].y+u*s[1].y)/c,z:i?(l*s[0].z+u*s[1].z)/c:!1,t:e};if(l*=o,u*=2*o,f*=e*e,s.length===3)return c=l+u+f,{x:(l*s[0].x+u*s[1].x+f*s[2].x)/c,y:(l*s[0].y+u*s[1].y+f*s[2].y)/c,z:i?(l*s[0].z+u*s[1].z+f*s[2].z)/c:!1,t:e};if(l*=o,u*=1.5*o,f*=3*o,h*=e*e*e,s.length===4)return c=l+u+f+h,{x:(l*s[0].x+u*s[1].x+f*s[2].x+h*s[3].x)/c,y:(l*s[0].y+u*s[1].y+f*s[2].y+h*s[3].y)/c,z:i?(l*s[0].z+u*s[1].z+f*s[2].z+h*s[3].z)/c:!1,t:e}},derive:function(e,n){const r=[];for(let i=e,o=i.length,a=o-1;o>1;o--,a--){const s=[];for(let l=0,u;l<a;l++)u={x:a*(i[l+1].x-i[l].x),y:a*(i[l+1].y-i[l].y)},n&&(u.z=a*(i[l+1].z-i[l].z)),s.push(u);r.push(s),i=s}return r},between:function(e,n,r){return n<=e&&e<=r||E.approximately(e,n)||E.approximately(e,r)},approximately:function(e,n,r){return Kt(e-n)<=(r||$c)},length:function(e){const r=E.Tvalues.length;let i=0;for(let o=0,a;o<r;o++)a=.5*E.Tvalues[o]+.5,i+=E.Cvalues[o]*E.arcfn(a,e);return .5*i},map:function(e,n,r,i,o){const a=r-n,s=o-i,l=e-n,u=l/a;return i+s*u},lerp:function(e,n,r){const i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(E.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const i=n.x-e.x,o=n.y-e.y,a=r.x-e.x,s=r.y-e.y,l=i*s-o*a,u=i*a+o*s;return Zt(l,u)},round:function(e,n){const r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){const r=e.x-n.x,i=e.y-n.y;return Pt(r*r+i*i)},closest:function(e,n){let r=ot(2,63),i,o;return e.forEach(function(a,s){o=E.dist(n,a),o<r&&(r=o,i=s)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=ot(e,n)+ot(1-e,n),i=r-1;return Kt(i/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=ot(1-e,n),i=ot(e,n)+r;return r/i},lli8:function(e,n,r,i,o,a,s,l){const u=(e*i-n*r)*(o-s)-(e-r)*(o*l-a*s),f=(e*i-n*r)*(a-l)-(n-i)*(o*l-a*s),h=(e-r)*(a-l)-(n-i)*(o-s);return h==0?!1:{x:u/h,y:f/h}},lli4:function(e,n,r,i){const o=e.x,a=e.y,s=n.x,l=n.y,u=r.x,f=r.y,h=i.x,c=i.y;return E.lli8(o,a,s,l,u,f,h,c)},lli:function(e,n){return E.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new G(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=rn,r=rn,i=on,o=on;return e.forEach(function(a){const s=a.bbox();n>s.x.min&&(n=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),o<s.y.max&&(o=s.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(e,n,r,i,o){if(!E.bboxoverlap(n,i))return[];const a=[],s=[e.startcap,e.forward,e.back,e.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(u){u.virtual||l.forEach(function(f){if(f.virtual)return;const h=u.intersects(f,o);h.length>0&&(h.c1=u,h.c2=f,h.s1=e,h.s2=r,a.push(h))})}),a},makeshape:function(e,n,r){const i=n.points.length,o=e.points.length,a=E.makeline(n.points[i-1],e.points[0]),s=E.makeline(e.points[o-1],n.points[0]),l={startcap:a,forward:e,back:n,endcap:s,bbox:E.findbbox([a,e,n,s])};return l.intersections=function(u){return E.shapeintersections(l,l.bbox,u,u.bbox,r)},l},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=rn,o=on,a,s;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,u=r.length;l<u;l++)a=r[l],s=e.get(a),s[n]<i&&(i=s[n]),s[n]>o&&(o=s[n]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,n){const r=n.p1.x,i=n.p1.y,o=-Zt(n.p2.y-i,n.p2.x-r),a=function(s){return{x:(s.x-r)*Mt(o)-(s.y-i)*jt(o),y:(s.x-r)*jt(o)+(s.y-i)*Mt(o)}};return e.map(a)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,i=E.align(e,n),o=function(M){return 0<=M&&M<=1};if(r===2){const M=i[0].y,S=i[1].y,O=i[2].y,T=M-2*S+O;if(T!==0){const P=-Pt(S*S-M*O),z=-M+S,$=-(P+z)/T,w=-(-P+z)/T;return[$,w].filter(o)}else if(S!==O&&T===0)return[(2*S-O)/(2*S-2*O)].filter(o);return[]}const a=i[0].y,s=i[1].y,l=i[2].y,u=i[3].y;let f=-a+3*s-3*l+u,h=3*a-6*s+3*l,c=-3*a+3*s,g=a;if(E.approximately(f,0)){if(E.approximately(h,0))return E.approximately(c,0)?[]:[-g/c].filter(o);const M=Pt(c*c-4*h*g),S=2*h;return[(M-c)/S,(-c-M)/S].filter(o)}h/=f,c/=f,g/=f;const d=(3*c-h*h)/3,y=d/3,_=(2*h*h*h-9*h*c+27*g)/27,v=_/2,p=v*v+y*y*y;let b,C,m,x,k;if(p<0){const M=-d/3,S=M*M*M,O=Pt(S),T=-_/(2*O),P=T<-1?-1:T>1?1:T,z=Dc(P),$=Qt(O),w=2*$;return m=w*Mt(z/3)-h/3,x=w*Mt((z+Me)/3)-h/3,k=w*Mt((z+2*Me)/3)-h/3,[m,x,k].filter(o)}else{if(p===0)return b=v<0?Qt(-v):-Qt(v),m=2*b-h/3,x=-b-h/3,[m,x].filter(o);{const M=Pt(p);return b=Qt(-v+M),C=Qt(v+M),[b-C-h/3].filter(o)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],i=e[2],o=n-2*r+i;if(o!==0){const a=-Pt(r*r-n*i),s=-n+r,l=-(a+s)/o,u=-(-a+s)/o;return[l,u]}else if(r!==i&&o===0)return[(2*r-i)/(2*(r-i))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,i,o){let a,s,l,u,f=0,h=0;const c=E.compute(e,n),g=E.compute(e,r),d=c.x*c.x+c.y*c.y;if(i?(a=Pt(ot(c.y*g.z-g.y*c.z,2)+ot(c.z*g.x-g.z*c.x,2)+ot(c.x*g.y-g.x*c.y,2)),s=ot(d+c.z*c.z,3/2)):(a=c.x*g.y-c.y*g.x,s=ot(d,3/2)),a===0||s===0)return{k:0,r:0};if(f=a/s,h=s/a,!o){const y=E.curvature(e-.001,n,r,i,!0).k,_=E.curvature(e+.001,n,r,i,!0).k;u=(_-f+(f-y))/2,l=(Kt(_-f)+Kt(f-y))/2}return{k:f,r:h,dk:u,adk:l}},inflections:function(e){if(e.length<4)return[];const n=E.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,o=n[1].x*n[2].y,a=n[3].x*n[2].y,s=18*(-3*r+2*i+3*o-a),l=18*(3*r-i-3*o),u=18*(o-r);if(E.approximately(s,0)){if(!E.approximately(l,0)){let g=-u/l;if(0<=g&&g<=1)return[g]}return[]}const f=2*s;if(E.approximately(f,0))return[];const h=l*l-4*s*u;if(h<0)return[];const c=Math.sqrt(h);return[(c-l)/f,-(l+c)/f].filter(function(g){return 0<=g&&g<=1})},bboxoverlap:function(e,n){const r=["x","y"],i=r.length;for(let o=0,a,s,l,u;o<i;o++)if(a=r[o],s=e[a].mid,l=n[a].mid,u=(e[a].size+n[a].size)/2,Kt(s-l)>=u)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const i=e.bbox(),o=n.bbox(),a=1e5,s=r||.5;if(i.x.size+i.y.size<s&&o.x.size+o.y.size<s)return[(a*(e._t1+e._t2)/2|0)/a+"/"+(a*(n._t1+n._t2)/2|0)/a];let l=e.split(.5),u=n.split(.5),f=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];f=f.filter(function(c){return E.bboxoverlap(c.left.bbox(),c.right.bbox())});let h=[];return f.length===0||(f.forEach(function(c){h=h.concat(E.pairiteration(c.left,c.right,s))}),h=h.filter(function(c,g){return h.indexOf(c)===g})),h},getccenter:function(e,n,r){const i=n.x-e.x,o=n.y-e.y,a=r.x-n.x,s=r.y-n.y,l=i*Mt(Ot)-o*jt(Ot),u=i*jt(Ot)+o*Mt(Ot),f=a*Mt(Ot)-s*jt(Ot),h=a*jt(Ot)+s*Mt(Ot),c=(e.x+n.x)/2,g=(e.y+n.y)/2,d=(n.x+r.x)/2,y=(n.y+r.y)/2,_=c+l,v=g+u,p=d+f,b=y+h,C=E.lli8(c,g,_,v,d,y,p,b),m=E.dist(C,e);let x=Zt(e.y-C.y,e.x-C.x),k=Zt(n.y-C.y,n.x-C.x),M=Zt(r.y-C.y,r.x-C.x),S;return x<M?((x>k||k>M)&&(x+=Me),x>M&&(S=M,M=x,x=S)):M<k&&k<x?(S=M,M=x,x=S):M+=Me,C.s=x,C.e=M,C.r=m,C},numberSort:function(e,n){return e-n}};class ae{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return E.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var r=n[0].bbox(),i=1;i<n.length;i++)E.expandbox(r,n[i].bbox());return r}offset(n){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(n))}),new ae(r)}}const{abs:Jt,min:Lr,max:Fr,cos:Fc,sin:jc,acos:Uc,sqrt:te}=Math,Hc=Math.PI;class G{constructor(n){let r=n&&n.forEach?n:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const d=[];r.forEach(function(y){["x","y","z"].forEach(function(_){typeof y[_]<"u"&&d.push(y[_])})}),r=d}let o=!1;const a=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const s=this._3d=!o&&(a===9||a===12)||n&&n[0]&&typeof n[0].z<"u",l=this.points=[];for(let d=0,y=s?3:2;d<a;d+=y){var u={x:r[d],y:r[d+1]};s&&(u.z=r[d+2]),l.push(u)}const f=this.order=l.length-1,h=this.dims=["x","y"];s&&h.push("z"),this.dimlen=h.length;const c=E.align(l,{p1:l[0],p2:l[f]}),g=E.dist(l[0],l[f]);this._linear=c.reduce((d,y)=>d+Jt(y.y),0)<g/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,r,i,o){if(typeof o>"u"&&(o=.5),o===0)return new G(r,r,i);if(o===1)return new G(n,r,r);const a=G.getABC(2,n,r,i,o);return new G(n,a.A,i)}static cubicFromPoints(n,r,i,o,a){typeof o>"u"&&(o=.5);const s=G.getABC(3,n,r,i,o);typeof a>"u"&&(a=E.dist(r,s.C));const l=a*(1-o)/o,u=E.dist(n,i),f=(i.x-n.x)/u,h=(i.y-n.y)/u,c=a*f,g=a*h,d=l*f,y=l*h,_={x:r.x-c,y:r.y-g},v={x:r.x+d,y:r.y+y},p=s.A,b={x:p.x+(_.x-p.x)/(1-o),y:p.y+(_.y-p.y)/(1-o)},C={x:p.x+(v.x-p.x)/o,y:p.y+(v.y-p.y)/o},m={x:n.x+(b.x-n.x)/o,y:n.y+(b.y-n.y)/o},x={x:i.x+(C.x-i.x)/(1-o),y:i.y+(C.y-i.y)/(1-o)};return new G(n,m,x,i)}static getUtils(){return E}getUtils(){return G.getUtils()}static get PolyBezier(){return ae}valueOf(){return this.toString()}toString(){return E.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,r=n[0].x,i=n[0].y,o=["M",r,i,this.order===2?"Q":"C"];for(let a=1,s=n.length;a<s;a++)o.push(n[a].x),o.push(n[a].y);return o.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,r){return""+r+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=E.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,r=E.angle(n[0],n[this.order],n[1]);this.clockwise=r>0}length(){return E.length(this.derivative.bind(this))}static getABC(n=2,r,i,o,a=.5){const s=E.projectionratio(a,n),l=1-s,u={x:s*r.x+l*o.x,y:s*r.y+l*o.y},f=E.abcratio(a,n);return{A:{x:i.x+(i.x-u.x)/f,y:i.y+(i.y-u.y)/f},B:i,C:u,S:r,E:o}}getABC(n,r){r=r||this.get(n);let i=this.points[0],o=this.points[this.order];return G.getABC(this.order,i,r,o,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r=0,i,o;r<n;r++)o=r/(n-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(n,r){r=r||5;const i=this.getLUT(),o=[];for(let a=0,s,l=0;a<i.length;a++)s=i[a],E.dist(s,n)<r&&(o.push(s),l+=a/i.length);return o.length?t/=o.length:!1}project(n){const r=this.getLUT(),i=r.length-1,o=E.closest(r,n),a=o.mpos,s=(a-1)/i,l=(a+1)/i,u=.1/i;let f=o.mdist,h=s,c=h,g;f+=1;for(let d;h<l+u;h+=u)g=this.compute(h),d=E.dist(n,g),d<f&&(f=d,c=h);return c=c<0?0:c>1?1:c,g=this.compute(c),g.t=c,g.d=f,g}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?E.computeWithRatios(n,this.points,this.ratios,this._3d):E.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,r=[n[0]],i=n.length;for(let o=1,a,s;o<i;o++)a=n[o],s=n[o-1],r[o]={x:(i-o)/i*a.x+o/i*s.x,y:(i-o)/i*a.y+o/i*s.y};return r[i]=n[i-1],new G(r)}derivative(n){return E.compute(n,this.dpoints[0],this._3d)}dderivative(n){return E.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new G(E.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return E.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return E.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const r=this.derivative(n),i=te(r.x*r.x+r.y*r.y);return{t:n,x:-r.y/i,y:r.x/i}}__normal3(n){const r=this.derivative(n),i=this.derivative(n+.01),o=te(r.x*r.x+r.y*r.y+r.z*r.z),a=te(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=o,r.y/=o,r.z/=o,i.x/=a,i.y/=a,i.z/=a;const s={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=te(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=l,s.y/=l,s.z/=l;const u=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:n,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(n){let r=this.points,i=[],o=[],a=0;for(o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],this.order===3&&(o[a++]=r[3]);r.length>1;){i=[];for(let s=0,l,u=r.length-1;s<u;s++)l=E.lerp(n,r[s],r[s+1]),o[a++]=l,i.push(l);r=i}return o}split(n,r){if(n===0&&r)return this.split(r).left;if(r===1)return this.split(n).right;const i=this.hull(n),o={left:this.order===2?new G([i[0],i[3],i[5]]):new G([i[0],i[4],i[7],i[9]]),right:this.order===2?new G([i[5],i[4],i[2]]):new G([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=E.map(0,0,1,this._t1,this._t2),o.left._t2=E.map(n,0,1,this._t1,this._t2),o.right._t1=E.map(n,0,1,this._t1,this._t2),o.right._t2=E.map(1,0,1,this._t1,this._t2),r?(r=E.map(r,n,1,0,1),o.right.split(r).left):o}extrema(){const n={};let r=[];return this.dims.forEach((function(i){let o=function(s){return s[i]},a=this.dpoints[0].map(o);n[i]=E.droots(a),this.order===3&&(a=this.dpoints[1].map(o),n[i]=n[i].concat(E.droots(a))),n[i]=n[i].filter(function(s){return s>=0&&s<=1}),r=r.concat(n[i].sort(E.numberSort))}).bind(this)),n.values=r.sort(E.numberSort).filter(function(i,o){return r.indexOf(i)===o}),n}bbox(){const n=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=E.getminmax(this,i,n[i])}).bind(this)),r}overlaps(n){const r=this.bbox(),i=n.bbox();return E.bboxoverlap(r,i)}offset(n,r){if(typeof r<"u"){const i=this.get(n),o=this.normal(n),a={c:i,n:o,x:i.x+o.x*r,y:i.y+o.y*r};return this._3d&&(a.z=i.z+o.z*r),a}if(this._linear){const i=this.normal(0),o=this.points.map(function(a){const s={x:a.x+n*i.x,y:a.y+n*i.y};return a.z&&i.z&&(s.z=a.z+n*i.z),s});return[new G(o)]}return this.reduce().map(function(i){return i._linear?i.offset(n)[0]:i.scale(n)})}simple(){if(this.order===3){const o=E.angle(this.points[0],this.points[3],this.points[1]),a=E.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&a<0||o<0&&a>0)return!1}const n=this.normal(0),r=this.normal(1);let i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),Jt(Uc(i))<Hc/3}reduce(){let n,r=0,i=0,o=.01,a,s=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],n=1;n<u.length;n++)i=u[n],a=this.split(r,i),a._t1=r,a._t2=i,s.push(a),r=i;return s.forEach(function(f){for(r=0,i=0;i<=1;)for(i=r+o;i<=1+o;i+=o)if(a=f.split(r,i),!a.simple()){if(i-=o,Jt(r-i)<o)return[];a=f.split(r,i),a._t1=E.map(r,0,1,f._t1,f._t2),a._t2=E.map(i,0,1,f._t1,f._t2),l.push(a),r=i;break}r<1&&(a=f.split(r,1),a._t1=E.map(r,0,1,f._t1,f._t2),a._t2=f._t2,l.push(a))}),l}translate(n,r,i){i=typeof i=="number"?i:r;const o=this.order;let a=this.points.map((s,l)=>(1-l/o)*r+l/o*i);return new G(this.points.map((s,l)=>({x:s.x+n.x*a[l],y:s.y+n.y*a[l]})))}scale(n){const r=this.order;let i=!1;if(typeof n=="function"&&(i=n),i&&r===2)return this.raise().scale(i);const o=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):n,i?i(1):n);const s=i?i(0):n,l=i?i(1):n,u=[this.offset(0,10),this.offset(1,10)],f=[],h=E.lli4(u[0],u[0].c,u[1],u[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(c){const g=f[c*r]=E.copy(a[c*r]);g.x+=(c?l:s)*u[c].n.x,g.y+=(c?l:s)*u[c].n.y}),i?([0,1].forEach(function(c){if(!(r===2&&c)){var g=a[c+1],d={x:g.x-h.x,y:g.y-h.y},y=i?i((c+1)/r):n;i&&!o&&(y=-y);var _=te(d.x*d.x+d.y*d.y);d.x/=_,d.y/=_,f[c+1]={x:g.x+y*d.x,y:g.y+y*d.y}}}),new G(f)):([0,1].forEach(c=>{if(r===2&&c)return;const g=f[c*r],d=this.derivative(c),y={x:g.x+d.x,y:g.y+d.y};f[c+1]=E.lli4(g,y,h,a[c+1])}),new G(f))}outline(n,r,i,o){if(r=r===void 0?n:r,this._linear){const x=this.normal(0),k=this.points[0],M=this.points[this.points.length-1];let S,O,T;i===void 0&&(i=n,o=r),S={x:k.x+x.x*n,y:k.y+x.y*n},T={x:M.x+x.x*i,y:M.y+x.y*i},O={x:(S.x+T.x)/2,y:(S.y+T.y)/2};const P=[S,O,T];S={x:k.x-x.x*r,y:k.y-x.y*r},T={x:M.x-x.x*o,y:M.y-x.y*o},O={x:(S.x+T.x)/2,y:(S.y+T.y)/2};const z=[T,O,S],$=E.makeline(z[2],P[0]),w=E.makeline(P[2],z[0]),N=[$,new G(P),w,new G(z)];return new ae(N)}const a=this.reduce(),s=a.length,l=[];let u=[],f,h=0,c=this.length();const g=typeof i<"u"&&typeof o<"u";function d(x,k,M,S,O){return function(T){const P=S/M,z=(S+O)/M,$=k-x;return E.map(T,0,1,x+P*$,x+z*$)}}a.forEach(function(x){const k=x.length();g?(l.push(x.scale(d(n,i,c,h,k))),u.push(x.scale(d(-r,-o,c,h,k)))):(l.push(x.scale(n)),u.push(x.scale(-r))),h+=k}),u=u.map(function(x){return f=x.points,f[3]?x.points=[f[3],f[2],f[1],f[0]]:x.points=[f[2],f[1],f[0]],x}).reverse();const y=l[0].points[0],_=l[s-1].points[l[s-1].points.length-1],v=u[s-1].points[u[s-1].points.length-1],p=u[0].points[0],b=E.makeline(v,y),C=E.makeline(_,p),m=[b].concat(l).concat([C]).concat(u);return new ae(m)}outlineshapes(n,r,i){r=r||n;const o=this.outline(n,r).curves,a=[];for(let s=1,l=o.length;s<l/2;s++){const u=E.makeshape(o[s],o[l-s],i);u.startcap.virtual=s>1,u.endcap.virtual=s<l/2-1,a.push(u)}return a}intersects(n,r){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof G&&(n=n.reduce()),this.curveintersects(this.reduce(),n,r)):this.selfintersects(r)}lineIntersects(n){const r=Lr(n.p1.x,n.p2.x),i=Lr(n.p1.y,n.p2.y),o=Fr(n.p1.x,n.p2.x),a=Fr(n.p1.y,n.p2.y);return E.roots(this.points,n).filter(s=>{var l=this.get(s);return E.between(l.x,r,o)&&E.between(l.y,i,a)})}selfintersects(n){const r=this.reduce(),i=r.length-2,o=[];for(let a=0,s,l,u;a<i;a++)l=r.slice(a,a+1),u=r.slice(a+2),s=this.curveintersects(l,u,n),o.push(...s);return o}curveintersects(n,r,i){const o=[];n.forEach(function(s){r.forEach(function(l){s.overlaps(l)&&o.push({left:s,right:l})})});let a=[];return o.forEach(function(s){const l=E.pairiteration(s.left,s.right,i);l.length>0&&(a=a.concat(l))}),a}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,r,i,o){const a=(o-i)/4,s=this.get(i+a),l=this.get(o-a),u=E.dist(n,r),f=E.dist(n,s),h=E.dist(n,l);return Jt(f-u)+Jt(h-u)}_iterate(n,r){let i=0,o=1,a;do{a=0,o=1;let s=this.get(i),l,u,f,h,c=!1,g=!1,d,y=o,_=1;do if(g=c,h=f,y=(i+o)/2,l=this.get(y),u=this.get(o),f=E.getccenter(s,l,u),f.interval={start:i,end:o},c=this._error(f,s,i,o)<=n,d=g&&!c,d||(_=o),c){if(o>=1){if(f.interval.end=_=1,h=f,o>1){let p={x:f.x+f.r*Fc(f.e),y:f.y+f.r*jc(f.e)};f.e+=E.angle({x:f.x,y:f.y},p,this.get(1))}break}o=o+(o-i)/2}else o=y;while(!d&&a++<100);if(a>=100)break;h=h||f,r.push(h),i=_}while(o<1);return r}}function kn(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function qc(e){if(Array.isArray(e))return e}function Bc(e){if(Array.isArray(e))return kn(e)}function Gc(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wc(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,l=[],u=!0,f=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw o}}return l}}function Vc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yc(e,n){if(e==null)return{};var r,i,o=Kc(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Kc(e,n){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(n.includes(i))continue;r[i]=e[i]}return r}function Zc(e,n){return qc(e)||Wc(e,n)||Vi(e,n)||Vc()}function Qc(e){return Bc(e)||Gc(e)||Vi(e)||Xc()}function Jc(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function th(e){var n=Jc(e,"string");return typeof n=="symbol"?n:n+""}function Vi(e,n){if(e){if(typeof e=="string")return kn(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kn(e,n):void 0}}var eh=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),a=e.reduce(function(l,u){var f=l,h=u;return o.forEach(function(c,g){var d=c.keyAccessor,y=c.isProp,_;if(y){var v=h,p=v[d],b=Yc(v,[d].map(th));_=p,h=b}else _=d(h,g);g+1<o.length?(f.hasOwnProperty(_)||(f[_]={}),f=f[_]):r?(f.hasOwnProperty(_)||(f[_]=[]),f[_].push(h)):f[_]=h}),l},{});r instanceof Function&&function l(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;f===o.length?Object.keys(u).forEach(function(h){return u[h]=r(u[h])}):Object.values(u).forEach(function(h){return l(h,f+1)})}(a);var s=a;return i&&(s=[],function l(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];f.length===o.length?s.push({keys:f,vals:u}):Object.entries(u).forEach(function(h){var c=Zc(h,2),g=c[0],d=c[1];return l(d,[].concat(Qc(f),[g]))})}(a),n instanceof Array&&n.length===0&&s.length===1&&(s[0].keys=[])),s};function nh(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const jr=Symbol("implicit");function Xi(){var e=new sr,n=[],r=[],i=jr;function o(a){let s=e.get(a);if(s===void 0){if(i!==jr)return i;e.set(a,s=n.push(a)-1)}return r[s%r.length]}return o.domain=function(a){if(!arguments.length)return n.slice();n=[],e=new sr;for(const s of a)e.has(s)||e.set(s,n.push(s)-1);return o},o.range=function(a){return arguments.length?(r=Array.from(a),o):r.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.copy=function(){return Xi(n,r).unknown(i)},nh.apply(o,arguments),o}function rh(e){for(var n=e.length/6|0,r=new Array(n),i=0;i<n;)r[i]="#"+e.slice(i*6,++i*6);return r}const ih=rh("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function oh(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var ah=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;oh(ah);function Cn(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function sh(e){if(Array.isArray(e))return e}function lh(e){if(Array.isArray(e))return Cn(e)}function Ur(e,n,r){if(Yi())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,n);var o=new(e.bind.apply(e,i));return o}function ge(e,n,r){return(n=gh(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Yi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yi=function(){return!!e})()}function uh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fh(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,l=[],u=!0,f=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(u=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw o}}return l}}function ch(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hr(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Ut(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Hr(Object(r),!0).forEach(function(i){ge(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function se(e,n){return sh(e)||fh(e,n)||Ki(e,n)||ch()}function st(e){return lh(e)||uh(e)||Ki(e)||hh()}function dh(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function gh(e){var n=dh(e,"string");return typeof n=="symbol"?n:n+""}function Mn(e){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mn(e)}function Ki(e,n){if(e){if(typeof e=="string")return Cn(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cn(e,n):void 0}}var ph=Xi(ih);function qr(e,n,r){!n||typeof r!="string"||e.filter(function(i){return!i[r]}).forEach(function(i){i[r]=ph(n(i))})}function yh(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.nodeFilter,s=a===void 0?function(){return!0}:a,l=o.onLoopError,u=l===void 0?function(d){throw"Invalid DAG structure! Found cycle in node path: ".concat(d.join(" -> "),".")}:l,f={};r.forEach(function(d){return f[n(d)]={data:d,out:[],depth:-1,skip:!s(d)}}),i.forEach(function(d){var y=d.source,_=d.target,v=m(y),p=m(_);if(!f.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!f.hasOwnProperty(p))throw"Missing target node with id: ".concat(p);var b=f[v],C=f[p];b.out.push(C);function m(x){return Mn(x)==="object"?n(x):x}});var h=[];g(Object.values(f));var c=Object.assign.apply(Object,[{}].concat(st(Object.entries(f).filter(function(d){var y=se(d,2),_=y[1];return!_.skip}).map(function(d){var y=se(d,2),_=y[0],v=y[1];return ge({},_,v.depth)}))));return c;function g(d){for(var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var m=d[p];if(y.indexOf(m)!==-1){var x=[].concat(st(y.slice(y.indexOf(m))),[m]).map(function(k){return n(k.data)});return h.some(function(k){return k.length===x.length&&k.every(function(M,S){return M===x[S]})})||(h.push(x),u(x)),1}_>m.depth&&(m.depth=_,g(m.out,[].concat(st(y),[m]),_+(m.skip?0:1)))},p=0,b=d.length;p<b;p++)v()}}var _h=2,Z=function(n,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Br=function(n,r){if(!r.isShadow){var i=q(r.linkDirectionalParticles);r.graphData.links.forEach(function(o){var a=Math.round(Math.abs(i(o)));a?o.__photons=st(Array(a)).map(function(){return{}}):delete o.__photons})}},qe=In({props:{graphData:{default:{nodes:[],links:[]},onChange:function(n,r){r.engineRunning=!1,Br(n,r)}},dagMode:{onChange:function(n,r){!n&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(n){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Z},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Z},nodeColor:{default:"color",triggerUpdate:!1,onChange:Z},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Z},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Z},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Z},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Z},linkColor:{default:"color",triggerUpdate:!1,onChange:Z},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Z},linkWidth:{default:1,triggerUpdate:!1,onChange:Z},linkCurvature:{default:0,triggerUpdate:!1,onChange:Z},linkCanvasObject:{triggerUpdate:!1,onChange:Z},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Z},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Z},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Z},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Z},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Br},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaDecay(n)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaTarget(n)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.velocityDecay(n)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(n,r,i){return i===void 0?n.forceLayout.force(r):(n.forceLayout.force(r,i),this)},d3ReheatSimulation:function(n){return n.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(n){return n.cntTicks=0,n.startTickTime=new Date,n.engineRunning=!0,this},isEngineRunning:function(n){return!!n.engineRunning},tickFrame:function(n){return!n.isShadow&&r(),o(),!n.isShadow&&a(),!n.isShadow&&s(),i(),this;function r(){n.engineRunning&&(++n.cntTicks>n.cooldownTicks||new Date-n.startTickTime>n.cooldownTime||n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin?(n.engineRunning=!1,n.onEngineStop()):(n.forceLayout.tick(),n.onEngineTick()))}function i(){var l=q(n.nodeVisibility),u=q(n.nodeVal),f=q(n.nodeColor),h=q(n.nodeCanvasObjectMode),c=n.ctx,g=n.isShadow/n.globalScale,d=n.graphData.nodes.filter(l);c.save(),d.forEach(function(y){var _=h(y);if(n.nodeCanvasObject&&(_==="before"||_==="replace")&&(n.nodeCanvasObject(y,c,n.globalScale),_==="replace")){c.restore();return}var v=Math.sqrt(Math.max(0,u(y)||1))*n.nodeRelSize+g;c.beginPath(),c.arc(y.x,y.y,v,0,2*Math.PI,!1),c.fillStyle=f(y)||"rgba(31, 120, 180, 0.92)",c.fill(),n.nodeCanvasObject&&_==="after"&&n.nodeCanvasObject(y,n.ctx,n.globalScale)}),c.restore()}function o(){var l=q(n.linkVisibility),u=q(n.linkColor),f=q(n.linkWidth),h=q(n.linkLineDash),c=q(n.linkCurvature),g=q(n.linkCanvasObjectMode),d=n.ctx,y=n.isShadow*2,_=n.graphData.links.filter(l);_.forEach(k);var v=[],p=[],b=_;if(n.linkCanvasObject){var C=[],m=[];_.forEach(function(M){return({before:v,after:p,replace:C}[g(M)]||m).push(M)}),b=[].concat(st(v),p,m),v=v.concat(C)}d.save(),v.forEach(function(M){return n.linkCanvasObject(M,d,n.globalScale)}),d.restore();var x=eh(b,[u,f,h]);d.save(),Object.entries(x).forEach(function(M){var S=se(M,2),O=S[0],T=S[1],P=!O||O==="undefined"?"rgba(0,0,0,0.15)":O;Object.entries(T).forEach(function(z){var $=se(z,2),w=$[0],N=$[1],A=(w||1)/n.globalScale+y;Object.entries(N).forEach(function(I){var D=se(I,2);D[0];var L=D[1],F=h(L[0]);d.beginPath(),L.forEach(function(j){var H=j.source,Y=j.target;if(!(!H||!Y||!H.hasOwnProperty("x")||!Y.hasOwnProperty("x"))){d.moveTo(H.x,H.y);var X=j.__controlPoints;X?d[X.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(d,st(X).concat([Y.x,Y.y])):d.lineTo(Y.x,Y.y)}}),d.strokeStyle=P,d.lineWidth=A,d.setLineDash(F||[]),d.stroke()})})}),d.restore(),d.save(),p.forEach(function(M){return n.linkCanvasObject(M,d,n.globalScale)}),d.restore();function k(M){var S=c(M);if(!S){M.__controlPoints=null;return}var O=M.source,T=M.target;if(!(!O||!T||!O.hasOwnProperty("x")||!T.hasOwnProperty("x"))){var P=Math.sqrt(Math.pow(T.x-O.x,2)+Math.pow(T.y-O.y,2));if(P>0){var z=Math.atan2(T.y-O.y,T.x-O.x),$=P*S,w={x:(O.x+T.x)/2+$*Math.cos(z-Math.PI/2),y:(O.y+T.y)/2+$*Math.sin(z-Math.PI/2)};M.__controlPoints=[w.x,w.y]}else{var N=S*70;M.__controlPoints=[T.x,T.y-N,T.x+N,T.y]}}}}function a(){var l=1.6,u=.2,f=q(n.linkDirectionalArrowLength),h=q(n.linkDirectionalArrowRelPos),c=q(n.linkVisibility),g=q(n.linkDirectionalArrowColor||n.linkColor),d=q(n.nodeVal),y=n.ctx;y.save(),n.graphData.links.filter(c).forEach(function(_){var v=f(_);if(!(!v||v<0)){var p=_.source,b=_.target;if(!(!p||!b||!p.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var C=Math.sqrt(Math.max(0,d(p)||1))*n.nodeRelSize,m=Math.sqrt(Math.max(0,d(b)||1))*n.nodeRelSize,x=Math.min(1,Math.max(0,h(_))),k=g(_)||"rgba(0,0,0,0.28)",M=v/l/2,S=_.__controlPoints&&Ur(G,[p.x,p.y].concat(st(_.__controlPoints),[b.x,b.y])),O=S?function(A){return S.get(A)}:function(A){return{x:p.x+(b.x-p.x)*A||0,y:p.y+(b.y-p.y)*A||0}},T=S?S.length():Math.sqrt(Math.pow(b.x-p.x,2)+Math.pow(b.y-p.y,2)),P=C+v+(T-C-m-v)*x,z=O(P/T),$=O((P-v)/T),w=O((P-v*(1-u))/T),N=Math.atan2(z.y-$.y,z.x-$.x)-Math.PI/2;y.beginPath(),y.moveTo(z.x,z.y),y.lineTo($.x+M*Math.cos(N),$.y+M*Math.sin(N)),y.lineTo(w.x,w.y),y.lineTo($.x-M*Math.cos(N),$.y-M*Math.sin(N)),y.fillStyle=k,y.fill()}}}),y.restore()}function s(){var l=q(n.linkDirectionalParticles),u=q(n.linkDirectionalParticleSpeed),f=q(n.linkDirectionalParticleOffset),h=q(n.linkDirectionalParticleWidth),c=q(n.linkVisibility),g=q(n.linkDirectionalParticleColor||n.linkColor),d=n.ctx;d.save(),n.graphData.links.filter(c).forEach(function(y){var _=l(y);if(!(!y.hasOwnProperty("__photons")||!y.__photons.length)){var v=y.source,p=y.target;if(!(!v||!p||!v.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var b=u(y),C=Math.abs(f(y)),m=y.__photons||[],x=Math.max(0,h(y)/2)/Math.sqrt(n.globalScale),k=g(y)||"rgba(0,0,0,0.28)";d.fillStyle=k;var M=y.__controlPoints?Ur(G,[v.x,v.y].concat(st(y.__controlPoints),[p.x,p.y])):null,S=0,O=!1;m.forEach(function(T){var P=!!T.__singleHop;if(T.hasOwnProperty("__progressRatio")||(T.__progressRatio=P?0:(S+C)/_),!P&&S++,T.__progressRatio+=b,T.__progressRatio>=1)if(!P)T.__progressRatio=T.__progressRatio%1;else{O=!0;return}var z=T.__progressRatio,$=M?M.get(z):{x:v.x+(p.x-v.x)*z||0,y:v.y+(p.y-v.y)*z||0};n.linkDirectionalParticleCanvasObject?n.linkDirectionalParticleCanvasObject($.x,$.y,y,d,n.globalScale):(d.beginPath(),d.arc($.x,$.y,x,0,2*Math.PI,!1),d.fill())}),O&&(y.__photons=y.__photons.filter(function(T){return!T.__singleHop||T.__progressRatio<=1}))}}}),d.restore()}},emitParticle:function(n,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:zc().force("link",Mc()).force("charge",Ic()).force("center",Af()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(n,r){r.ctx=n},update:function(n,r){n.engineRunning=!1,n.onUpdate(),n.nodeAutoColorBy!==null&&qr(n.graphData.nodes,q(n.nodeAutoColorBy),n.nodeColor),n.linkAutoColorBy!==null&&qr(n.graphData.links,q(n.linkAutoColorBy),n.linkColor),n.graphData.links.forEach(function(g){g.source=g[n.linkSource],g.target=g[n.linkTarget]}),n.forceLayout.stop().alpha(1).nodes(n.graphData.nodes);var i=n.forceLayout.force("link");i&&i.id(function(g){return g[n.nodeId]}).links(n.graphData.links);var o=n.dagMode&&yh(n.graphData,function(g){return g[n.nodeId]},{nodeFilter:n.dagNodeFilter,onLoopError:n.onDagError||void 0}),a=Math.max.apply(Math,st(Object.values(o||[]))),s=n.dagLevelDistance||n.graphData.nodes.length/(a||1)*_h*(["radialin","radialout"].indexOf(n.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(g){return delete g[l]})}if(["lr","rl","td","bu"].includes(n.dagMode)){var u=["rl","bu"].includes(n.dagMode),f=function(d){return(o[d[n.nodeId]]-a/2)*s*(u?-1:1)},h=["lr","rl"].includes(n.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(g){return g[h]=f(g)})}n.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(n.dagMode)!==-1?Rc(function(g){var d=o[g[n.nodeId]]||-1;return(n.dagMode==="radialin"?a-d:d)*s}).strength(function(g){return n.dagNodeFilter(g)?1:0}):null);for(var c=0;c<n.warmupTicks&&!(n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin);c++)n.forceLayout.tick();this.resetCountdown(),n.onFinishUpdate()}});function Zi(e,n){var r=e instanceof Array?e:[e],i=new n;return i._destructor&&i._destructor(),{linkProp:function(a){return{default:i[a](),onChange:function(l,u){r.forEach(function(f){return u[f][a](l)})},triggerUpdate:!1}},linkMethod:function(a){return function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];var h=[];return r.forEach(function(c){var g=s[c],d=g[a].apply(g,u);d!==g&&h.push(d)}),h.length?h[0]:this}}}}var vh=800,mh=4,xh=5,Qi=Zi("forceGraph",qe),bh=Zi(["forceGraph","shadowGraph"],qe),wh=Object.assign.apply(Object,st(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return ge({},e,Qi.linkProp(e))})).concat(st(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return ge({},e,bh.linkProp(e))})))),kh=Object.assign.apply(Object,st(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return ge({},e,Qi.linkMethod(e))})));function an(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;n===300&&r===150&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(a){a.style.width="".concat(e.width,"px"),a.style.height="".concat(e.height,"px"),a.width=e.width*i,a.height=e.height*i,!n&&!r&&a.getContext("2d").scale(i,i)});var o=gt(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/o,(e.height-r)/2/o),e.needsRedraw=!0}}function Ji(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function Gr(e,n,r){e.save(),Ji(e),e.clearRect(0,0,n,r),e.restore()}var Ch=In({props:Ut({width:{default:window.innerWidth,onChange:function(n,r){return an(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(n,r){return an(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(n,r){[n.nodes,n.links].every(function(o){return(o||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:n.nodes},{type:"Link",objs:n.links}].forEach(i),r.forceGraph.graphData(n),r.shadowGraph.graphData(n);function i(o){var a=o.type,s=o.objs;s.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:a,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(n,r){r.canvas&&n&&(r.canvas.style.background=n)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(n,r){r.shadowGraph.nodeCanvasObject(n?function(i,o,a){return n(i,i.__indexColor,o,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(n,r){r.shadowGraph.linkCanvasObject(n?function(i,o,a){return n(i,i.__indexColor,o,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(n,r){r.zoom.scaleExtent([n,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(n,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],n])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(n,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},wh),aliases:{stopAnimation:"pauseAnimation"},methods:Ut({graph2ScreenCoords:function(n,r,i){var o=gt(n.canvas);return{x:r*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(n,r,i){var o=gt(n.canvas);return{x:(r-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(n,r,i,o){if(!n.canvas)return null;if(r!==void 0||i!==void 0){var a=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return o?n.tweenGroup.add(new gr(s()).to(a,o).easing(Lt.Quadratic.Out).onUpdate(l).start()):l(a),this}return s();function s(){var u=gt(n.canvas);return{x:(n.width/2-u.x)/u.k,y:(n.height/2-u.y)/u.k}}function l(u){var f=u.x,h=u.y;n.zoom.translateTo(n.zoom.__baseElem,f===void 0?s().x:f,h===void 0?s().y:h),n.needsRedraw=!0}},zoom:function(n,r,i){if(!n.canvas)return null;if(r!==void 0)return i?n.tweenGroup.add(new gr({k:o()}).to({k:r},i).easing(Lt.Quadratic.Out).onUpdate(function(s){var l=s.k;return a(l)}).start()):a(r),this;return o();function o(){return gt(n.canvas).k}function a(s){n.zoom.scaleTo(n.zoom.__baseElem,s),n.needsRedraw=!0}},zoomToFit:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];var l=this.getGraphBbox.apply(this,a);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},f=Math.max(1e-12,Math.min(1e12,(n.width-i*2)/(l.x[1]-l.x[0]),(n.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,r),this.zoom(f,r)}return this},getGraphBbox:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=q(n.nodeVal),o=function(l){return Math.sqrt(Math.max(0,i(l)||1))*n.nodeRelSize},a=n.graphData.nodes.filter(r).map(function(s){return{x:s.x,y:s.y,r:o(s)}});return a.length?{x:[fr(a,function(s){return s.x-s.r}),ur(a,function(s){return s.x+s.r})],y:[fr(a,function(s){return s.y-s.r}),ur(a,function(s){return s.y+s.r})]}:null},pauseAnimation:function(n){return n.animationFrameRequestId&&(cancelAnimationFrame(n.animationFrameRequestId),n.animationFrameRequestId=null),this},resumeAnimation:function(n){return n.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},kh),stateInit:function(){return{lastSetZoom:1,zoom:Il(),forceGraph:new qe,shadowGraph:new qe().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new of,tweenGroup:new wi}},init:function(n,r){var i=this;n.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",n.appendChild(o),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),o.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var a=r.canvas.getContext("2d"),s=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var c=null,g=window.devicePixelRatio,d=l.x>0&&l.y>0?s.getImageData(l.x*g,l.y*g,1,1):null;return d&&(c=r.colorTracker.lookup(d.data)),c};at(r.canvas).call(Ba().subject(function(){if(!r.enableNodeDrag)return null;var h=u();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var c=h.subject;c.__initialDragPos={x:c.x,y:c.y,fx:c.fx,fy:c.fy},h.active||(c.fx=c.x,c.fy=c.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var c=h.subject,g=c.__initialDragPos,d=h,y=gt(r.canvas).k,_={x:g.x+(d.x-g.x)/y-c.x,y:g.y+(d.y-g.y)/y-c.y};["x","y"].forEach(function(v){return c["f".concat(v)]=c[v]=g[v]+(d[v]-g[v])/y}),!(!c.__dragged&&xh>=Math.sqrt(Ll(["x","y"].map(function(v){return Math.pow(h[v]-g[v],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,c.__dragged=!0,r.onNodeDrag(c,_))}).on("end",function(h){var c=h.subject,g=c.__initialDragPos,d={x:c.x-g.x,y:c.y-g.y};g.fx===void 0&&(c.fx=void 0),g.fy===void 0&&(c.fy=void 0),delete c.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,c.__dragged&&(delete c.__dragged,r.onNodeDragEnd(c,d))})),r.zoom(r.zoom.__baseElem=at(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||q(r.enableZoomInteraction)(h))&&(h.type==="wheel"||q(r.enablePanInteraction)(h))}).on("zoom",function(h){var c=h.transform;[a,s].forEach(function(g){Ji(g),g.translate(c.x,c.y),g.scale(c.k,c.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(Ut(Ut({},c),i.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(Ut(Ut({},h.transform),i.centerAt()))}),an(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){gt(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=mh/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new Sf(o),["pointermove","pointerdown"].forEach(function(h){return o.addEventListener(h,function(c){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=c),!r.isPointerDragging&&c.type==="pointermove"&&r.onBackgroundClick&&(c.pressure>0||r.isPointerPressed)&&(c.pointerType==="mouse"||c.movementX===void 0||[c.movementX,c.movementY].some(function(y){return Math.abs(y)>1}))&&(r.isPointerDragging=!0);var g=d(o);l.x=c.pageX-g.left,l.y=c.pageY-g.top;function d(y){var _=y.getBoundingClientRect(),v=window.pageXOffset||document.documentElement.scrollLeft,p=window.pageYOffset||document.documentElement.scrollTop;return{top:_.top+p,left:_.left+v}}},{passive:!0})}),o.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var c=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var g=r["on".concat(r.hoverObj.type,"Click")];g&&g.apply(void 0,[r.hoverObj.d].concat(c))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,c);if(h.button===2)if(r.hoverObj){var d=r["on".concat(r.hoverObj.type,"RightClick")];d&&d.apply(void 0,[r.hoverObj.d].concat(c))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,c)})}},{passive:!0}),o.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(a),r.shadowGraph(s);var f=cu(function(){Gr(s,r.width,r.height),r.shadowGraph.linkWidth(function(c){return q(r.linkWidth)(c)+r.linkHoverPrecision});var h=gt(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},vh);r.flushShadowCanvas=f.flush,(this._animationCycle=function h(){var c=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(C){return C.__photons&&C.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var g=r.isPointerDragging?null:u();if(g!==r.hoverObj){var d=r.hoverObj,y=d?d.type:null,_=g?g.type:null;if(y&&y!==_){var v=r["on".concat(y,"Hover")];v&&v(null,d.d)}if(_){var p=r["on".concat(_,"Hover")];p&&p(g.d,y===_?d.d:null)}r.tooltip.content(g&&q(r["".concat(g.type.toLowerCase(),"Label")])(g.d)||null),r.canvas.classList[(g&&r["on".concat(_,"Click")]||!g&&r.onBackgroundClick)&&q(r.showPointerCursor)(g==null?void 0:g.d)?"add":"remove"]("clickable"),r.hoverObj=g}c&&f()}if(c){Gr(a,r.width,r.height);var b=gt(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(a,b),r.forceGraph.globalScale(b).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(a,b)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(n){}});function Wr(e){return function(){return e}}function Se(e){return(e()-.5)*1e-6}function Mh(e){return e.x}function Sh(e){return e.y}function Ah(){var e,n,r,i,o=Wr(-30),a,s=1,l=1/0,u=.81;function f(d){var y,_=e.length,v=jn(e,Mh,Sh).visitAfter(c);for(i=d,y=0;y<_;++y)n=e[y],v.visit(g)}function h(){if(e){var d,y=e.length,_;for(a=new Array(y),d=0;d<y;++d)_=e[d],a[_.index]=+o(_,d,e)}}function c(d){var y=0,_,v,p=0,b,C,m;if(d.length){for(b=C=m=0;m<4;++m)(_=d[m])&&(v=Math.abs(_.value))&&(y+=_.value,p+=v,b+=v*_.x,C+=v*_.y);d.x=b/p,d.y=C/p}else{_=d,_.x=_.data.x,_.y=_.data.y;do y+=a[_.data.index];while(_=_.next)}d.value=y}function g(d,y,_,v){if(!d.value)return!0;var p=d.x-n.x,b=d.y-n.y,C=v-y,m=p*p+b*b;if(C*C/u<m)return m<l&&(p===0&&(p=Se(r),m+=p*p),b===0&&(b=Se(r),m+=b*b),m<s&&(m=Math.sqrt(s*m)),n.vx+=p*d.value*i/m,n.vy+=b*d.value*i/m),!0;if(d.length||m>=l)return;(d.data!==n||d.next)&&(p===0&&(p=Se(r),m+=p*p),b===0&&(b=Se(r),m+=b*b),m<s&&(m=Math.sqrt(s*m)));do d.data!==n&&(C=a[d.data.index]*i/m,n.vx+=p*C,n.vy+=b*C);while(d=d.next)}return f.initialize=function(d,y){e=d,r=y,h()},f.strength=function(d){return arguments.length?(o=typeof d=="function"?d:Wr(+d),h(),f):o},f.distanceMin=function(d){return arguments.length?(s=d*d,f):Math.sqrt(s)},f.distanceMax=function(d){return arguments.length?(l=d*d,f):Math.sqrt(l)},f.theta=function(d){return arguments.length?(u=d*d,f):Math.sqrt(u)},f}class Eh{constructor(n){U(this,"ws",null);U(this,"messageHandlers",new Map);this.url=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log(" WebSocket connected"),this.emit("connected",null),this.send({type:"requestGraphData"})},this.ws.onmessage=n=>{try{const r=JSON.parse(n.data);this.emit(r.type,r.data)}catch(r){console.error("Error parsing message:",r)}},this.ws.onerror=n=>{console.error(" WebSocket error:",n),this.emit("error",n)},this.ws.onclose=()=>{console.log(" WebSocket disconnected"),this.emit("disconnected",null),setTimeout(()=>this.connect(),2e3)}}on(n,r){this.messageHandlers.set(n,r)}emit(n,r){const i=this.messageHandlers.get(n);i&&i(r)}send(n){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(n))}isConnected(){return this.ws!==null&&this.ws.readyState===WebSocket.OPEN}}class Th{constructor(){U(this,"nodeColorMap",new Map);U(this,"linkColorMap",new Map);U(this,"nodeColorMapDim",new Map);U(this,"linkColorMapDim",new Map);U(this,"PREDEFINED_NODE_COLORS",{question:"#7c3aed",claim:"#0ea5e9",evidence:"#f97316",source:"#ec4899"});U(this,"PREDEFINED_LINK_COLORS",{supports:"#22c55e",opposes:"#ef4444",answers:"#8b5cf6",informs:"#06b6d4","based-on":"#a855f7"})}buildColorMaps(n,r){const i=new Set(n.map(l=>l.type)),o=new Set(r.map(l=>l.type)),a=Array.from(i).sort();a.forEach((l,u)=>{if(this.PREDEFINED_NODE_COLORS[l])this.nodeColorMap.set(l,this.PREDEFINED_NODE_COLORS[l]);else{const f=this.generateColor(u,a.length);this.nodeColorMap.set(l,f)}this.nodeColorMapDim.set(l,"#4a5568")}),this.nodeColorMap.set("default","#64748b"),this.nodeColorMapDim.set("default","#4a5568");const s=Array.from(o).sort();s.forEach((l,u)=>{if(this.PREDEFINED_LINK_COLORS[l])this.linkColorMap.set(l,this.PREDEFINED_LINK_COLORS[l]);else{const f=this.generateColor(u,s.length);this.linkColorMap.set(l,f)}this.linkColorMapDim.set(l,"#374151")}),this.linkColorMap.set("default","#475569"),this.linkColorMapDim.set("default","#374151")}generateColor(n,r){const i=n*360/r%360;return this.hslToHex(i,70,60)}hslToHex(n,r,i){r/=100,i/=100;const o=(1-Math.abs(2*i-1))*r,a=o*(1-Math.abs(n/60%2-1)),s=i-o/2;let l=0,u=0,f=0;return 0<=n&&n<60?(l=o,u=a,f=0):60<=n&&n<120?(l=a,u=o,f=0):120<=n&&n<180?(l=0,u=o,f=a):180<=n&&n<240?(l=0,u=a,f=o):240<=n&&n<300?(l=a,u=0,f=o):300<=n&&n<360&&(l=o,u=0,f=a),l=Math.round((l+s)*255),u=Math.round((u+s)*255),f=Math.round((f+s)*255),"#"+[l,u,f].map(h=>h.toString(16).padStart(2,"0")).join("")}getNodeColor(n){return this.nodeColorMap.get(n)||this.nodeColorMap.get("default")}getLinkColor(n){return this.linkColorMap.get(n)||this.linkColorMap.get("default")}getNodeColorDim(n){return this.nodeColorMapDim.get(n)||this.nodeColorMapDim.get("default")}getLinkColorDim(n){return this.linkColorMapDim.get(n)||this.linkColorMapDim.get("default")}getAllNodeColors(){return new Map(this.nodeColorMap)}}class Nh{constructor(){U(this,"enabledTypes",new Set);U(this,"allTypes",new Set);U(this,"onChangeCallback",null)}updateTypes(n){this.allTypes.clear(),n.forEach(r=>{r.type&&this.allTypes.add(r.type)}),this.enabledTypes=new Set(this.allTypes)}getAllTypes(){return new Set(this.allTypes)}toggleType(n,r){r?this.enabledTypes.add(n):this.enabledTypes.delete(n),this.onChangeCallback&&this.onChangeCallback()}isTypeEnabled(n){return this.enabledTypes.has(n)}onChange(n){this.onChangeCallback=n}getEnabledTypes(){return new Set(this.enabledTypes)}}class Ph{constructor(){U(this,"panel");U(this,"titleEl");U(this,"metaEl");U(this,"fileEl");U(this,"openButton");U(this,"hideTimeout",null);U(this,"onOpenCallback",null);this.panel=document.getElementById("nodePanel"),this.titleEl=document.getElementById("panelTitle"),this.metaEl=document.getElementById("panelMeta"),this.fileEl=document.getElementById("panelFile"),this.openButton=document.getElementById("openButton"),this.setupEventListeners()}setupEventListeners(){this.panel.addEventListener("mouseenter",()=>{this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}),this.panel.addEventListener("mouseleave",()=>{this.hide()}),this.openButton.addEventListener("click",()=>{if(this.onOpenCallback){const n=this.openButton._currentNode;n&&this.onOpenCallback(n)}})}show(n){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),this.titleEl.textContent=n.title,this.metaEl.innerHTML=`
      <div class="node-panel-tag">Type: ${n.type}</div>
      <div class="node-panel-tag">ID: ${n.id.substring(0,8)}...</div>
    `,this.fileEl.textContent=n.file,this.openButton._currentNode=n,this.panel.classList.add("visible")}hide(){this.panel.classList.remove("visible")}scheduleHide(n=1e3){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=window.setTimeout(()=>{this.hide()},n)}onOpen(n){this.onOpenCallback=n}}class Oh{constructor(){U(this,"ws");U(this,"graph");U(this,"colorManager");U(this,"filterManager");U(this,"panelManager");U(this,"allNodes",[]);U(this,"allLinks",[]);U(this,"highlightNodes",new Set);U(this,"highlightLinks",new Set);U(this,"primaryHighlightNode",null);U(this,"currentSelectedNode",null);U(this,"isSidebarCollapsed",!1);U(this,"lastNodeClickTime",0);this.colorManager=new Th,this.filterManager=new Nh,this.panelManager=new Ph,this.ws=new Eh("ws://localhost:35904"),this.initTheme(),this.initGraph(),this.setupWebSocket(),this.setupEventListeners(),this.setupKeyboardShortcuts()}initGraph(){const n=document.getElementById("graph"),i=document.body.classList.contains("light-theme")?"#ffffff":"#0a0e17";this.graph=Ch()(n).backgroundColor(i).nodeRelSize(8).nodeCanvasObject((o,a,s)=>this.renderNode(o,a,s)).onRenderFramePost((o,a)=>this.renderPrimaryNodeLabel(o,a)).linkCanvasObject((o,a,s)=>this.renderLink(o,a,s)).linkDirectionalParticles(o=>this.highlightLinks.has(o)?4:2).linkDirectionalParticleSpeed(.004).linkDirectionalParticleWidth(o=>this.highlightLinks.has(o)?3:2).linkDirectionalParticleColor(o=>this.colorManager.getLinkColor(o.type)).onNodeHover(o=>this.handleNodeHover(o)).onNodeClick(o=>this.handleNodeClick(o)).onNodeRightClick(o=>this.handleNodeRightClick(o)).onNodeDragEnd(o=>{const a=o;a.fx=a.x,a.fy=a.y,setTimeout(()=>{a.fx=null,a.fy=null},100)}).d3VelocityDecay(.3).cooldownTicks(100).warmupTicks(50),this.setupBackgroundClick()}renderNode(n,r,i){const o=12/i;r.font=`400 ${o}px Inter, sans-serif`;const a=Math.sqrt(Math.max(0,n.val||1))*3,s=n===this.primaryHighlightNode,l=this.highlightNodes.has(n)&&!s,u=document.body.classList.contains("light-theme");let f,h;if(s){f=this.colorManager.getNodeColor(n.type),h="#ffffff",r.beginPath(),r.arc(n.x,n.y,a*2.5,0,2*Math.PI);const g=r.createRadialGradient(n.x,n.y,a,n.x,n.y,a*2.5);g.addColorStop(0,f+"80"),g.addColorStop(1,f+"00"),r.fillStyle=g,r.fill()}else if(l){f=this.colorManager.getNodeColor(n.type),h=u?"#1f2937":"#e4e7eb",r.beginPath(),r.arc(n.x,n.y,a*1.4,0,2*Math.PI);const g=r.createRadialGradient(n.x,n.y,a,n.x,n.y,a*1.4);g.addColorStop(0,f+"40"),g.addColorStop(1,f+"00"),r.fillStyle=g,r.fill()}else f=this.colorManager.getNodeColorDim(n.type),h="#6b7280";if(r.beginPath(),r.arc(n.x,n.y,a,0,2*Math.PI),r.fillStyle=f,r.fill(),s&&(r.strokeStyle=u?"#1f2937":"#ffffff",r.lineWidth=3/i,r.stroke()),(s||l||i>=1.5)&&!s){const g=n.title,d=n.y+a+o+4;u?(r.shadowColor="rgba(255, 255, 255, 0.9)",r.shadowBlur=8,r.shadowOffsetX=0,r.shadowOffsetY=0):(r.shadowColor="rgba(0, 0, 0, 0.9)",r.shadowBlur=6,r.shadowOffsetX=0,r.shadowOffsetY=2),r.textAlign="center",r.textBaseline="middle",r.fillStyle=h,r.fillText(g,n.x,d),r.shadowColor="transparent",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0}}renderPrimaryNodeLabel(n,r){if(!this.primaryHighlightNode)return;const i=this.primaryHighlightNode,o=13/r,a=Math.sqrt(Math.max(0,i.val||1))*4;n.font=`700 ${o}px Inter, sans-serif`,n.textAlign="center",n.textBaseline="middle",n.fillStyle="#ffffff",n.shadowColor="rgba(0, 0, 0, 0.8)",n.shadowBlur=4,n.shadowOffsetX=0,n.shadowOffsetY=1,n.fillText(i.title,i.x,i.y+a+o+2),n.shadowColor="transparent",n.shadowBlur=0}renderLink(n,r,i){const o=n.source,a=n.target;if(!o.x||!o.y||!a.x||!a.y)return;const s=this.highlightLinks.has(n),l=this.colorManager.getLinkColor(n.type),u=n.style==="dashed";let f,h=.8;s?f="BB":f="50",u?r.setLineDash([3,3]):r.setLineDash([]),r.strokeStyle=l+f,r.lineWidth=h,r.beginPath(),r.moveTo(o.x,o.y),r.lineTo(a.x,a.y),r.stroke(),r.setLineDash([]);const c=a.x-o.x,g=a.y-o.y,d=Math.atan2(g,c),y=8,_=a.x-Math.cos(d)*y,v=a.y-Math.sin(d)*y,p=s?4:3.5,b=Math.PI/6;r.fillStyle=l+f,r.beginPath(),r.moveTo(_,v),r.lineTo(_-p*Math.cos(d-b),v-p*Math.sin(d-b)),r.lineTo(_-p*Math.cos(d+b),v-p*Math.sin(d+b)),r.closePath(),r.fill()}handleNodeHover(n){this.highlightNodes.clear(),this.highlightLinks.clear(),n?(this.highlightNodes.add(n),this.allLinks.forEach(r=>{(r.source===n||r.target===n)&&(this.highlightLinks.add(r),this.highlightNodes.add(r.source),this.highlightNodes.add(r.target))})):this.panelManager.scheduleHide(1e3),this.primaryHighlightNode&&this.highlightNodes.add(this.primaryHighlightNode)}handleNodeClick(n){this.lastNodeClickTime=Date.now(),this.currentSelectedNode=n,this.primaryHighlightNode=n,this.panelManager.show(n)}handleNodeRightClick(n){this.openNode(n)}handleBackgroundClick(){this.primaryHighlightNode=null,this.currentSelectedNode=null,this.highlightNodes.clear(),this.highlightLinks.clear(),this.panelManager.hide()}setupBackgroundClick(){const n=document.querySelector("#graph canvas");n&&n.addEventListener("click",r=>{r.target.tagName==="CANVAS"&&setTimeout(()=>{const o=Date.now();(!this.lastNodeClickTime||o-this.lastNodeClickTime>50)&&this.handleBackgroundClick()},10)})}openNode(n){if(!this.ws.isConnected()){this.showToast(" Not connected to Emacs");return}this.ws.send({type:"open",data:{id:n.id}}),this.showToast(" Opening in Emacs...")}setupWebSocket(){this.ws.on("connected",()=>{this.updateStatus(!0)}),this.ws.on("disconnected",()=>{this.updateStatus(!1)}),this.ws.on("graphdata",n=>{this.updateGraphData(n)}),this.ws.on("command",n=>{this.handleCommand(n)}),this.ws.on("focus",n=>{const r=this.allNodes.find(i=>i.id===n.id);r&&(this.primaryHighlightNode=r,this.currentSelectedNode=r,this.centerOnNode(r))}),this.ws.connect()}updateGraphData(n){this.allNodes=n.nodes.map(r=>({...r,val:1})),this.allLinks=n.links.map(r=>({source:r.source,target:r.target,type:r.type||"default",style:r.style||"solid"})),this.colorManager.buildColorMaps(this.allNodes,this.allLinks),this.filterManager.updateTypes(this.allNodes),this.buildFilterUI(),this.applyFilters()}buildFilterUI(){const n=document.getElementById("filterItems");n.innerHTML="",Array.from(this.filterManager.getAllTypes()).sort().forEach(i=>{const o=this.colorManager.getNodeColor(i),a=document.createElement("label");a.className="filter-item";const s=document.createElement("input");s.type="checkbox",s.checked=!0;const l=document.createElement("div");l.className="filter-toggle";const u=document.createElement("div");u.className="filter-dot",u.style.background=o;const f=document.createElement("span");f.className="filter-label",f.textContent=i.charAt(0).toUpperCase()+i.slice(1),s.addEventListener("change",()=>{this.filterManager.toggleType(i,s.checked),this.applyFilters()}),a.appendChild(s),a.appendChild(l),a.appendChild(u),a.appendChild(f),n.appendChild(a)})}applyFilters(){const n=this.filterManager.getEnabledTypes(),r=this.allNodes.filter(u=>n.has(u.type)),i=new Set(r.map(u=>u.id)),o=this.allLinks.filter(u=>i.has(u.source.id||u.source)&&i.has(u.target.id||u.target)),a=this.graph.graphData(),s=new Map;a&&a.nodes&&a.nodes.forEach(u=>{u.x!==void 0&&u.y!==void 0&&s.set(u.id,{x:u.x,y:u.y,vx:u.vx||0,vy:u.vy||0})}),r.forEach(u=>{const f=s.get(u.id);f&&(u.x=f.x,u.y=f.y,u.vx=f.vx,u.vy=f.vy,u.fx=null,u.fy=null)}),this.graph.graphData({nodes:r,links:o}),document.getElementById("nodeCount").textContent=r.length.toString(),document.getElementById("linkCount").textContent=o.length.toString();const l=this.graph.d3Force("simulation");l&&l.alpha(.3).restart(),r.length>0&&setTimeout(()=>{this.graph.zoomToFit(800,50)},100)}setupEventListeners(){document.getElementById("searchBox").addEventListener("input",l=>{this.handleSearch(l.target.value)}),document.getElementById("chargeSlider").addEventListener("input",l=>{const u=l.target.value;document.getElementById("chargeValue").textContent=u,this.graph.d3Force("charge",Ah().strength(-Number(u))),this.graph.d3ReheatSimulation()}),document.getElementById("distanceSlider").addEventListener("input",l=>{const u=l.target.value;document.getElementById("distanceValue").textContent=u,this.graph.d3Force("link").distance(Number(u)),this.graph.d3ReheatSimulation()}),document.getElementById("sidebarToggle").addEventListener("click",()=>{this.toggleSidebar()}),document.getElementById("themeToggle").addEventListener("click",()=>{this.toggleTheme()}),this.panelManager.onOpen(l=>{this.openNode(l)});let s;window.addEventListener("resize",()=>{clearTimeout(s),s=window.setTimeout(()=>{const l=document.getElementById("graph"),u=this.graph.width(),f=this.graph.height(),h=this.graph.zoom(),c=this.graph.centerAt(),g=l.clientWidth,d=l.clientHeight;this.graph.width(g).height(d);const y=g-u,_=d-f,v=y/2,p=_/2;c.x!==void 0&&c.y!==void 0&&this.graph.centerAt(c.x-v/h,c.y-p/h,300)},100)})}setupKeyboardShortcuts(){document.addEventListener("keydown",n=>{n.key==="r"||n.key==="R"?this.ws.isConnected()&&this.ws.send({type:"requestGraphData"}):n.key==="Enter"&&this.currentSelectedNode?this.openNode(this.currentSelectedNode):n.key==="["||n.key==="]"?this.toggleSidebar():n.key==="/"||n.key==="f"&&n.ctrlKey?(n.preventDefault(),this.isSidebarCollapsed&&this.toggleSidebar(),document.getElementById("searchBox").focus()):(n.key==="?"||n.key==="h"&&!n.ctrlKey&&!n.metaKey)&&this.showHelp()})}showHelp(){const n=`
 Controls

Mouse:
 Drag node = Adjust node position
 Drag background = Pan the graph 
 Scroll wheel = Zoom
 Click node = Select
 Right-click node = Open in Emacs

Keyboard shortcuts:
 / or Ctrl+F = Search nodes
 R = Refresh data
 [ or ] = Toggle sidebar
 Enter = Open selected node
 ? or H = Show this help

Tip:
Want to move the entire graph?
 Just drag the background to pan the canvas!
    `.trim();this.showToast(n,8e3)}handleSearch(n){if(!n.trim()){this.primaryHighlightNode=null;return}const r=this.allNodes.filter(i=>i.title.toLowerCase().includes(n.toLowerCase()));r.length>0?(this.primaryHighlightNode=r[0],this.currentSelectedNode=r[0],this.centerOnNode(r[0]),this.showToast(`Found: ${r[0].title.substring(0,30)}...`)):this.showToast("No matches found")}centerOnNode(n,r=2.5,i=1e3){const o=document.getElementById("graph");this.isSidebarCollapsed,o.clientWidth,this.graph.centerAt(n.x,n.y,i),this.graph.zoom(r,i)}toggleSidebar(){const n=document.getElementById("sidebar"),r=document.getElementById("graph"),i=280,o=this.isSidebarCollapsed;this.isSidebarCollapsed=!this.isSidebarCollapsed,this.isSidebarCollapsed?n.classList.add("collapsed"):n.classList.remove("collapsed"),setTimeout(()=>{this.graph.width(r.clientWidth).height(r.clientHeight);const a=this.graph.centerAt(),s=this.graph.zoom(),l=o?-1:1,u=i/2/s;a.x!==void 0&&a.y!==void 0&&this.graph.centerAt(a.x+l*u,a.y,500)},320)}handleCommand(n){if(n.commandName==="follow"&&n.id){const r=this.allNodes.find(i=>i.id===n.id);if(r){const i=document.getElementById("followIndicator");i.classList.add("active"),setTimeout(()=>{i.classList.remove("active")},2e3),this.highlightNodes.clear(),this.highlightLinks.clear(),this.primaryHighlightNode=r,this.highlightNodes.add(r),this.currentSelectedNode=r,this.centerOnNode(r,2.5,1e3),this.showToast(" Following: "+r.title.substring(0,30)+"...")}}}updateStatus(n){const r=document.getElementById("status");n?(r.className="status-badge connected",r.innerHTML='<span class="status-dot"></span> Connected'):(r.className="status-badge disconnected",r.innerHTML='<span class="status-dot"></span> Disconnected')}showToast(n,r=2e3){const i=document.getElementById("toast");i.textContent=n,i.style.whiteSpace="pre-line",i.classList.add("visible"),setTimeout(()=>{i.classList.remove("visible")},r)}initTheme(){localStorage.getItem("dg-theme")==="light"&&document.body.classList.add("light-theme")}toggleTheme(){const n=document.body.classList.toggle("light-theme");localStorage.setItem("dg-theme",n?"light":"dark");const r=n?"#ffffff":"#0a0e17";this.graph.backgroundColor(r),this.showToast(n?"Switched to Light theme":"Switched to Dark theme")}}new Oh;console.log(" Discourse Graphs UI started");
